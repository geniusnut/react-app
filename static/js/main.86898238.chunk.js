(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[0],{10:function(e,t,a){"use strict";a.d(t,"a",(function(){return h})),a.d(t,"c",(function(){return M}));var n=a(37),o=a(65),r=a(29),s=a(3),i=a(2),u=a(4),l=a(5),c=a(6),d=a(27),p=a(11),g=a(26),h=Object.freeze({STATE_NONE:0,STATE_SEND:1,STATE_ACK:2,STATE_RECEIPT:3,STATE_READ:4});function M(e){return e===h.STATE_SEND||e===h.STATE_ACK||e===h.STATE_READ}var f=new(function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).reset=function(){e.items=new Map,e.unread=new Map,e.loaded=new Set,e.maxIds=new Map},e.onUpdate=function(t){switch(t["@type"]){case"tgtMsgSend":var a=t.msg;e.set(a),e.addUnreadMsg(a),t=Object(r.a)({chat_id:a.getConversationid()},t),e.emit("tgtMsgSend",t);break;case"messagePull":var n=t,o=n.msgs,s=n.chat_id,i=(n.finished,!1);g.a.messageLoaded(s)||g.a.loadMessages(s),o.forEach((function(t){e.contains(t)||(e.set(t),i=!0)})),i&&e.emit("tgtMsgSend",t);break;case"msgAck":var u=t.msgAck;e.updateLocal(u),e.emit("msgAck",{msgId:u.getId(),chatId:u.getConversationid()});break;case"msgRead":var l=t.msgRead;e.updateRead(l),e.clearUnread(l),e.emit("msgRead",{msgId:l.getId(),chatId:l.getConversationid()});break;case"msgHasRead":var c=t.msgRead;e.updateReadLocal(c),e.emit("msgHasRead",{msgId:c.getId(),chatId:c.getConversationid()});break;case"messageUpdate":var d=t,h=d.convId,M=d.msgId;console.log("messageUpdate",{convId:h},{msgId:M},{lastMsgId:e.getLastMsgId(h)}),M>e.getLastMsgId(h)&&p.a.pullMessage(h,e.getLastMsgId(h))}},e.onClientUpdate=function(t){switch(t["@type"]){case"clientSendMessage":e.setLocal(t.msg),e.emitUpdate(t);break;case"clientUpdateMessagesLoaded":e.emitUpdate(t)}},e.emitUpdate=function(t){e.emit(t["@type"],t)},e.reset(),e.addIMListener(),e.setMaxListeners(1/0),e}return Object(c.a)(t,e),Object(i.a)(t,[{key:"addIMListener",value:function(){p.a.addListener("update",this.onUpdate),p.a.addListener("clientUpdate",this.onClientUpdate)}},{key:"contains",value:function(e){if(!e)return!1;var t=this.items.get(e.getConversationid());return!!t&&(!(!t.get(e.getId())&&!t.get(e.getJetts()))||("02BYXxXiaQvWv4WFRs6XR1SFgPFpKjxH7KTs41duZa3iG"===e.getConversationid()&&console.log("MessageStore not contains",t,e,e.getJetts(),t.get(e.getJetts()),e.getId(),t.get(e.getId())),!1))}},{key:"set",value:function(e){if(e){var t=this.items.get(e.getConversationid());t||(t=new Map,this.items.set(e.getConversationid(),t));var a={state:h.STATE_RECEIPT,msg:e,ts:e.getAckts()/1e6};t.set(e.getId(),a),(this.maxIds.get(e.getConversationid())||e.getId()>0)&&this.maxIds.set(e.getConversationid(),e.getId()),g.a.saveMessage(e.getConversationid(),e.getId(),a)}}},{key:"setLocal",value:function(e){if(e){var t=e.getConversationid(),a=this.items.get(t);a||(a=new Map,this.items.set(t,a));var n={state:h.STATE_SEND,msg:e,ts:e.getJetts()};a.set(e.getJetts(),n),g.a.saveMessage(t,e.getJetts(),n)}}},{key:"updateReadLocal",value:function(e){if(e){var t=[e.getConversationid(),e.getId()],a=t[0],n=t[1],o=this.items.get(a);if(o){console.log("updateReadLocal",a,n);var s=!0,i=!1,u=void 0;try{for(var l,c=o.values()[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var d=l.value;if(d.msg&&d.msg.getId()===n){console.log("updateReadLocal message.msg.getId",d.msg.getId());var p=Object(r.a)({},d,{state:h.STATE_READ});return o.set(d.msg.getJetts(),p),void g.a.saveMessage(a,d.msg.getJetts(),p)}}}catch(M){i=!0,u=M}finally{try{s||null==c.return||c.return()}finally{if(i)throw u}}}}}},{key:"updateRead",value:function(e){if(e){var t=e.getConversationid(),a=Object(o.a)(t,1)[0],n=this.items.get(a);if(n){var s=e.getId(),i=n.get(s);if(i){i.state=h.STATE_READ;var u=Object(r.a)({},i,{state:h.STATE_READ});n.set(s,u),g.a.saveMessage(a,s,u)}}}}},{key:"updateLocal",value:function(e){if(e){var t=this.items.get(e.getConversationid());if(t){var a=e.getJetts(),n=t.get(a);if(n){n.msg.setAckts(e.getAckts()),n.msg.setId(e.getId()),n.state=h.STATE_ACK;var o=Object(r.a)({},n,{state:h.STATE_ACK});t.set(e.getJetts(),o),g.a.saveMessage(n.msg.getConversationid(),a,o),p.a.update({"@type":"msgAcked",msg:o.msg})}}}}},{key:"get",value:function(e,t){var a=this.items.get(e);if(!a)return null;var n=a.get(t);return n||null}},{key:"addMessages",value:function(e,t){var a=this;console.log("MessageStore addMessages",e,t);var n=this.items.get(e);n||(n=new Map,this.items.set(e,n)),t.forEach((function(t,o){n.set(o,t);var r=a.maxIds.get(e);r&&t.msg&&t.msg.getId()>r&&a.maxIds.set(e,t.msg.getId())}))}},{key:"getMessages",value:function(e){console.log("MessageStore getMessages",e),this.loaded.has(e)&&this.loaded.add(e);var t=this.items.get(e);return t?Array.from(t.values()).sort((function(e,t){return e.ts>t.ts?1:-1})):[]}},{key:"getLastMsgId",value:function(e){return this.maxIds.get(e)||0}},{key:"addUnreadMsg",value:function(e){if(e){var t=[e.getConversationid(),e.getId()],a=t[0],n=t[1];a&&(this.unread.has(a)||this.unread.set(a,new Set),this.unread.get(a).add(n))}}},{key:"clearUnread",value:function(e){if(e){var t=[e.getConversationid(),e.getId()],a=t[0],n=t[1];a&&this.unread.has(a)&&this.unread.get(a).delete(n)}}},{key:"getUnreadByChatId",value:function(e){var t=this.unread.get(e);return t?t.size:0}},{key:"getUnread",value:function(){var e=0;return Object(n.a)(this.unread.values()).forEach((function(t){e+=t.size})),e}}]),t}(d.EventEmitter));window.message=f,t.b=f},11:function(e,t,a){"use strict";var n=a(9),o=a.n(n),r=a(15),s=a(3),i=a(2),u=a(4),l=a(5),c=a(6),d=a(27),p=a(17),g=a(49),h=a.n(g),M=a(171),f=a(92),I=a(68);var m=new(function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).state={cid:null,messages:[]},e.init=function(t){console.log("IMController init"),e.ws=new WebSocket(p.l),e.state.cid="2e8e0f4ad01fd073675b6e5d"===t?"10000":t,e.ws.binaryType="arraybuffer",e.ws.onopen=function(){console.log("onopen"),e.emit("update",{"@type":"imState"}),e.login()},e.ws.onmessage=function(t){console.log(t);var a=new Uint8Array(t.data),n=M.IMResponse.deserializeBinary(a);console.log(n),e.handleMessage(n)},e.ws.onclose=function(){console.log("disconnected",Date.now()),e.emit("update",{"@type":"imState"})},e.ws.onerror=function(e){}},e.ackResponse=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new M.IMRequest;n.setCid(e.state.cid),n.setOperation(t),n.setTs(a),e.send(n)},e.update=function(t){e.disableLog||console.log("update",t),e.emit("update",t)},e.clientUpdate=function(t){e.disableLog||console.log("clientUpdate",t),e.emit("clientUpdate",t)},e.send=function(t){var a=t.serializeBinary();console.log(t,a),e.ws.send(a)},e.setChatId=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={"@type":"clientUpdateChatId",chatId:t,messageId:a};e.clientUpdate(n)},e.uploadImage=function(t,a,n,o){var r=n.getConversationid(),s=n.getJetts(),i=new FormData;i.append("name",a),i.append("file",t);h.a.post(p.f,i,{headers:{},onUploadProgress:function(t){var a=t.lengthComputable?t.total:t.target.getResponseHeader("content-length")||t.target.getResponseHeader("x-decompressed-content-length");console.log("onUploadProgress",a,t);var n=0;null!==a&&(n=Math.round(100*t.loaded/a)),e.clientUpdate({"@type":"clientUpdateProgress",chat_id:r,message_id:s,progress:n})}}).then((function(e){console.log("uploadImage",{response:e}),o(e.data.data)})).catch((function(e){console.log("uploadImage",e)}))},e.pullMessage=function(e,t,a){var n;return function(){var o=this,r=arguments,s=function(){n=null,a||e.apply(o,r)},i=a&&!n;clearTimeout(n),n=setTimeout(s,t),i&&e.apply(o,r)}}(e.pullMessage,2e3),e.userSet=new Set,e.downloadSet=new Set,e.parameters={},e.disablelog=!0,e.localStorage=!1,e}return Object(c.a)(t,e),Object(i.a)(t,[{key:"handleMessage",value:function(e){this.state.cid;switch(e.getOperation()){case M.IMOperation.CLIENTOPEN:this.ackResponse(M.IMOperation.ACKCLIENTOPEN),this.queryConvs();break;case M.IMOperation.CONVERSATIONQUERY:var t=f.ConversationList.deserializeBinary(e.getBlob());this.emit("update",{"@type":"queryConv",convs:t.getConvsList()});break;case M.IMOperation.TARGETMESSAGESEND:var a=I.Msg.deserializeBinary(e.getBlob());console.log("ackResponse",e.getTs()),this.ackResponse(M.IMOperation.ACK,e.getTs()),this.emit("update",{"@type":"tgtMsgSend",msg:a});break;case M.IMOperation.CONVERSATIONMESSAGESEND:var n=I.MsgAck.deserializeBinary(e.getBlob());this.emit("update",{"@type":"msgAck",msgAck:n});break;case M.IMOperation.CONVERSATIONMESSAGEREAD:var o=I.MsgRead.deserializeBinary(e.getBlob());this.emit("update",{"@type":"msgRead",msgRead:o});break;case M.IMOperation.TARGETMESSAGEREAD:var r=I.MsgRead.deserializeBinary(e.getBlob());this.emit("update",{"@type":"msgHasRead",msgRead:r});break;case M.IMOperation.CONVERSATIONGROUPINFO:var s=I.Conversation.deserializeBinary(e.getBlob());console.log("CONVERSATIONGROUPINFO, ",s),this.emit("update",{"@type":"groupInfo",conv:s});break;case M.IMOperation.CONVERSATIONMESSAGEUPDATE:var i=M.MessageUpdate.deserializeBinary(e.getBlob());this.ackResponse(M.IMOperation.ACK,e.getTs()),this.emit("update",{"@type":"messageUpdate",convId:i.getConvid(),msgId:i.getMsgid()});break;case M.IMOperation.CONVERSATIONMESSAGEPULL:var u=I.MsgList.deserializeBinary(e.getBlob());if(0===u.getMsgsList().length)return;this.emit("update",{"@type":"messagePull",msgs:u.getMsgsList(),chat_id:u.getConvid(),finshed:u.getFinished()})}}},{key:"pullMessage",value:function(e,t){var a=new M.MessagePull;a.setDirect(!0),a.setMsgid(t),a.setConvid(e),a.setLimit(20);var n=new M.IMRequest;n.setCid(this.state.cid),n.setOperation(M.IMOperation.CONVERSATIONMESSAGEPULL),n.setBlob(a.serializeBinary()),this.send(n)}},{key:"getImState",value:function(){return!this.ws&&this.ws.readyState===this.ws.OPEN}},{key:"readMessage",value:function(e,t){if(t&&t.getCid()!==this.state.cid){var a=new I.MsgRead;a.setCid(t.getCid()),a.setId(t.getId()),a.setConversationid(e);var n=new M.IMRequest;n.setCid(this.state.cid),n.setOperation(M.IMOperation.CONVERSATIONMESSAGEREAD),n.setBlob(a.serializeBinary()),this.send(n)}}},{key:"login",value:function(){var e=new M.IMRequest;e.setCid(this.state.cid),e.setOperation(M.IMOperation.CLIENTOPEN),this.send(e)}},{key:"queryConvs",value:function(){console.log("queryConvs");var e=new M.IMRequest;e.setCid(this.state.cid),e.setOperation(M.IMOperation.CONVERSATIONQUERY),e.setTs(Date.now()),this.send(e)}},{key:"sendMsg",value:function(e,t){var a=new M.IMRequest;a.setConversation(t),a.setCid(this.state.cid),a.setOperation(M.IMOperation.CONVERSATIONMESSAGESEND),a.setTs(Date.now()),a.setMsg(e),this.send(a);var n={"@type":"clientSendMessage",msg:e};this.clientUpdate(n)}},{key:"sendFile",value:function(e,t,a,n){var o=this;this.uploadImage(t,a,e,(function(t){var a=I.FileBean.deserializeBinary(e.getBlob());a.setUrl(t),e.setBlob(a.serializeBinary());var r=new M.IMRequest;r.setConversation(n),r.setCid(o.state.cid),r.setOperation(M.IMOperation.CONVERSATIONMESSAGESEND),r.setTs(Date.now()),r.setMsg(e),o.send(r)}));var r={"@type":"clientSendMessage",msg:e};this.clientUpdate(r)}},{key:"sendImage",value:function(e,t,a,n){var o=this;this.uploadImage(t,a,e,(function(t){var a=new I.Image;a.setImgurl(t),e.setBlob(a.serializeBinary());var r=new M.IMRequest;r.setConversation(n),r.setCid(o.state.cid),r.setOperation(M.IMOperation.CONVERSATIONMESSAGESEND),r.setTs(Date.now()),r.setMsg(e),o.send(r)}));var r={"@type":"clientSendMessage",msg:e};this.clientUpdate(r)}},{key:"logout",value:function(){this.ws.close(),this.clientUpdate({"@type":"clientLogout"})}},{key:"queryGroup",value:function(e){var t=new M.IMRequest,a=new f.Conversation;a.setId(e),a.setVersion(0),t.setConversation(a),t.setOperation(M.IMOperation.CONVERSATIONGROUPINFO),this.send(t)}},{key:"getUser",value:function(){var e=Object(r.a)(o.a.mark((function e(t,a,n,r){var s,i=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.userSet.has(r)){e.next=2;break}return e.abrupt("return");case 2:this.userSet.add(r),s={uid:t,token:a,openId:n},console.log("IMController: ",(new Error).stack),h.a.post(p.e,"cid="+r,{headers:s}).then((function(e){console.log(e),200===e.data.code?i.update({"@type":"updateUser",user:e.data.data}):i.userSet.delete(r)})).catch((function(e){console.log(e),i.userSet.delete(r)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,a,n,o){return e.apply(this,arguments)}}()},{key:"downloadFile",value:function(){var e=Object(r.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.downloadSet.has(t)){e.next=2;break}return e.abrupt("return");case 2:this.downloadSet.add(t),h.a.get(t).then((function(e){console.log("IMController downloadFile",e.data),a.update({"@type":"downloadFile",url:t,file:e.data})})).catch((function(e){console.log("IMController downloadFile",e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.EventEmitter));window.im=m,t.a=m},119:function(e,t){e.exports="data:image/png;base64,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"},131:function(e,t){e.exports="data:image/png;base64,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"},145:function(e,t,a){e.exports=a(243)},150:function(e,t,a){},151:function(e,t,a){},153:function(e,t,a){},17:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"i",(function(){return o})),a.d(t,"j",(function(){return r})),a.d(t,"h",(function(){return s})),a.d(t,"k",(function(){return i})),a.d(t,"a",(function(){return u})),a.d(t,"l",(function(){return l})),a.d(t,"d",(function(){return d})),a.d(t,"c",(function(){return p})),a.d(t,"e",(function(){return g})),a.d(t,"f",(function(){return h})),a.d(t,"g",(function(){return M}));var n="IMNut Web",o=320,r=90,s=420,i=200,u=300,l="wss://imweb.bapi.app/chat",c="https://sdk.b.app",d=c+"/api/third/im/auth",p=c+"/api/third/im/authInfo",g=c+"/api/im/userProfile",h=c+"/api/im/upload",M="auth"},171:function(e,t,a){var n=a(75),o=n,r=Function("return this")(),s=a(68);o.object.extend(proto,s);var i=a(92);o.object.extend(proto,i),o.exportSymbol("proto.IMNut.BotMsg",null,r),o.exportSymbol("proto.IMNut.Code",null,r),o.exportSymbol("proto.IMNut.IMAck",null,r),o.exportSymbol("proto.IMNut.IMOperation",null,r),o.exportSymbol("proto.IMNut.IMRequest",null,r),o.exportSymbol("proto.IMNut.IMResponse",null,r),o.exportSymbol("proto.IMNut.MchMsg",null,r),o.exportSymbol("proto.IMNut.MessagePull",null,r),o.exportSymbol("proto.IMNut.MessageUpdate",null,r),o.exportSymbol("proto.IMNut.NatsMsg",null,r),o.exportSymbol("proto.IMNut.OnlineState",null,r),o.exportSymbol("proto.IMNut.OpResult",null,r),o.exportSymbol("proto.IMNut.StateMessage",null,r),o.exportSymbol("proto.IMNut.TgtBotMsg",null,r),o.exportSymbol("proto.IMNut.TgtGroupMemberAdded",null,r),o.exportSymbol("proto.IMNut.TgtGroupMemberRemoved",null,r),o.exportSymbol("proto.IMNut.TgtMchMsg",null,r),o.exportSymbol("proto.IMNut.TgtMsgPush",null,r),o.exportSymbol("proto.IMNut.TgtPeerState",null,r),proto.IMNut.StateMessage=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.StateMessage,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.StateMessage.displayName="proto.IMNut.StateMessage"),proto.IMNut.NatsMsg=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.NatsMsg,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.NatsMsg.displayName="proto.IMNut.NatsMsg"),proto.IMNut.IMAck=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.IMAck,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.IMAck.displayName="proto.IMNut.IMAck"),proto.IMNut.IMRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.IMRequest,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.IMRequest.displayName="proto.IMNut.IMRequest"),proto.IMNut.IMResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.IMResponse,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.IMResponse.displayName="proto.IMNut.IMResponse"),proto.IMNut.OpResult=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.OpResult,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.OpResult.displayName="proto.IMNut.OpResult"),proto.IMNut.TgtMsgPush=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.TgtMsgPush,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.TgtMsgPush.displayName="proto.IMNut.TgtMsgPush"),proto.IMNut.TgtPeerState=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.TgtPeerState,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.TgtPeerState.displayName="proto.IMNut.TgtPeerState"),proto.IMNut.MessagePull=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.MessagePull,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.MessagePull.displayName="proto.IMNut.MessagePull"),proto.IMNut.MessageUpdate=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.MessageUpdate,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.MessageUpdate.displayName="proto.IMNut.MessageUpdate"),proto.IMNut.TgtGroupMemberAdded=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.TgtGroupMemberAdded,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.TgtGroupMemberAdded.displayName="proto.IMNut.TgtGroupMemberAdded"),proto.IMNut.TgtGroupMemberRemoved=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.TgtGroupMemberRemoved,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.TgtGroupMemberRemoved.displayName="proto.IMNut.TgtGroupMemberRemoved"),proto.IMNut.MchMsg=function(e){n.Message.initialize(this,e,0,-1,proto.IMNut.MchMsg.repeatedFields_,null)},o.inherits(proto.IMNut.MchMsg,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.MchMsg.displayName="proto.IMNut.MchMsg"),proto.IMNut.TgtMchMsg=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.TgtMchMsg,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.TgtMchMsg.displayName="proto.IMNut.TgtMchMsg"),proto.IMNut.BotMsg=function(e){n.Message.initialize(this,e,0,-1,proto.IMNut.BotMsg.repeatedFields_,null)},o.inherits(proto.IMNut.BotMsg,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.BotMsg.displayName="proto.IMNut.BotMsg"),proto.IMNut.TgtBotMsg=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.TgtBotMsg,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.TgtBotMsg.displayName="proto.IMNut.TgtBotMsg"),n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.StateMessage.prototype.toObject=function(e){return proto.IMNut.StateMessage.toObject(e,this)},proto.IMNut.StateMessage.toObject=function(e,t){var a={state:n.Message.getFieldWithDefault(t,1,0)};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.StateMessage.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.StateMessage;return proto.IMNut.StateMessage.deserializeBinaryFromReader(a,t)},proto.IMNut.StateMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readEnum();e.setState(a);break;default:t.skipField()}}return e},proto.IMNut.StateMessage.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.StateMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.StateMessage.serializeBinaryToWriter=function(e,t){var a;0!==(a=e.getState())&&t.writeEnum(1,a)},proto.IMNut.StateMessage.prototype.getState=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.IMNut.StateMessage.prototype.setState=function(e){n.Message.setProto3EnumField(this,1,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.NatsMsg.prototype.toObject=function(e){return proto.IMNut.NatsMsg.toObject(e,this)},proto.IMNut.NatsMsg.toObject=function(e,t){var a={operation:n.Message.getFieldWithDefault(t,1,0),blob:t.getBlob_asB64()};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.NatsMsg.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.NatsMsg;return proto.IMNut.NatsMsg.deserializeBinaryFromReader(a,t)},proto.IMNut.NatsMsg.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readEnum();e.setOperation(a);break;case 2:a=t.readBytes();e.setBlob(a);break;default:t.skipField()}}return e},proto.IMNut.NatsMsg.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.NatsMsg.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.NatsMsg.serializeBinaryToWriter=function(e,t){var a=void 0;0!==(a=e.getOperation())&&t.writeEnum(1,a),(a=e.getBlob_asU8()).length>0&&t.writeBytes(2,a)},proto.IMNut.NatsMsg.prototype.getOperation=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.IMNut.NatsMsg.prototype.setOperation=function(e){n.Message.setProto3EnumField(this,1,e)},proto.IMNut.NatsMsg.prototype.getBlob=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.NatsMsg.prototype.getBlob_asB64=function(){return n.Message.bytesAsB64(this.getBlob())},proto.IMNut.NatsMsg.prototype.getBlob_asU8=function(){return n.Message.bytesAsU8(this.getBlob())},proto.IMNut.NatsMsg.prototype.setBlob=function(e){n.Message.setProto3BytesField(this,2,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.IMAck.prototype.toObject=function(e){return proto.IMNut.IMAck.toObject(e,this)},proto.IMNut.IMAck.toObject=function(e,t){var a={operation:n.Message.getFieldWithDefault(t,1,0),blob:t.getBlob_asB64()};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.IMAck.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.IMAck;return proto.IMNut.IMAck.deserializeBinaryFromReader(a,t)},proto.IMNut.IMAck.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readEnum();e.setOperation(a);break;case 2:a=t.readBytes();e.setBlob(a);break;default:t.skipField()}}return e},proto.IMNut.IMAck.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.IMAck.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.IMAck.serializeBinaryToWriter=function(e,t){var a=void 0;0!==(a=e.getOperation())&&t.writeEnum(1,a),(a=e.getBlob_asU8()).length>0&&t.writeBytes(2,a)},proto.IMNut.IMAck.prototype.getOperation=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.IMNut.IMAck.prototype.setOperation=function(e){n.Message.setProto3EnumField(this,1,e)},proto.IMNut.IMAck.prototype.getBlob=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.IMAck.prototype.getBlob_asB64=function(){return n.Message.bytesAsB64(this.getBlob())},proto.IMNut.IMAck.prototype.getBlob_asU8=function(){return n.Message.bytesAsU8(this.getBlob())},proto.IMNut.IMAck.prototype.setBlob=function(e){n.Message.setProto3BytesField(this,2,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.IMRequest.prototype.toObject=function(e){return proto.IMNut.IMRequest.toObject(e,this)},proto.IMNut.IMRequest.toObject=function(e,t){var a,o={operation:n.Message.getFieldWithDefault(t,1,0),cid:n.Message.getFieldWithDefault(t,2,""),conversation:(a=t.getConversation())&&i.Conversation.toObject(e,a),msg:(a=t.getMsg())&&s.Msg.toObject(e,a),blob:t.getBlob_asB64(),ts:n.Message.getFieldWithDefault(t,10,0)};return e&&(o.$jspbMessageInstance=t),o}),proto.IMNut.IMRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.IMRequest;return proto.IMNut.IMRequest.deserializeBinaryFromReader(a,t)},proto.IMNut.IMRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readEnum();e.setOperation(a);break;case 2:a=t.readString();e.setCid(a);break;case 3:a=new i.Conversation;t.readMessage(a,i.Conversation.deserializeBinaryFromReader),e.setConversation(a);break;case 4:a=new s.Msg;t.readMessage(a,s.Msg.deserializeBinaryFromReader),e.setMsg(a);break;case 5:a=t.readBytes();e.setBlob(a);break;case 10:a=t.readInt64();e.setTs(a);break;default:t.skipField()}}return e},proto.IMNut.IMRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.IMRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.IMRequest.serializeBinaryToWriter=function(e,t){var a=void 0;0!==(a=e.getOperation())&&t.writeEnum(1,a),(a=e.getCid()).length>0&&t.writeString(2,a),null!=(a=e.getConversation())&&t.writeMessage(3,a,i.Conversation.serializeBinaryToWriter),null!=(a=e.getMsg())&&t.writeMessage(4,a,s.Msg.serializeBinaryToWriter),(a=e.getBlob_asU8()).length>0&&t.writeBytes(5,a),0!==(a=e.getTs())&&t.writeInt64(10,a)},proto.IMNut.IMRequest.prototype.getOperation=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.IMNut.IMRequest.prototype.setOperation=function(e){n.Message.setProto3EnumField(this,1,e)},proto.IMNut.IMRequest.prototype.getCid=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.IMRequest.prototype.setCid=function(e){n.Message.setProto3StringField(this,2,e)},proto.IMNut.IMRequest.prototype.getConversation=function(){return n.Message.getWrapperField(this,i.Conversation,3)},proto.IMNut.IMRequest.prototype.setConversation=function(e){n.Message.setWrapperField(this,3,e)},proto.IMNut.IMRequest.prototype.clearConversation=function(){this.setConversation(void 0)},proto.IMNut.IMRequest.prototype.hasConversation=function(){return null!=n.Message.getField(this,3)},proto.IMNut.IMRequest.prototype.getMsg=function(){return n.Message.getWrapperField(this,s.Msg,4)},proto.IMNut.IMRequest.prototype.setMsg=function(e){n.Message.setWrapperField(this,4,e)},proto.IMNut.IMRequest.prototype.clearMsg=function(){this.setMsg(void 0)},proto.IMNut.IMRequest.prototype.hasMsg=function(){return null!=n.Message.getField(this,4)},proto.IMNut.IMRequest.prototype.getBlob=function(){return n.Message.getFieldWithDefault(this,5,"")},proto.IMNut.IMRequest.prototype.getBlob_asB64=function(){return n.Message.bytesAsB64(this.getBlob())},proto.IMNut.IMRequest.prototype.getBlob_asU8=function(){return n.Message.bytesAsU8(this.getBlob())},proto.IMNut.IMRequest.prototype.setBlob=function(e){n.Message.setProto3BytesField(this,5,e)},proto.IMNut.IMRequest.prototype.getTs=function(){return n.Message.getFieldWithDefault(this,10,0)},proto.IMNut.IMRequest.prototype.setTs=function(e){n.Message.setProto3IntField(this,10,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.IMResponse.prototype.toObject=function(e){return proto.IMNut.IMResponse.toObject(e,this)},proto.IMNut.IMResponse.toObject=function(e,t){var a={operation:n.Message.getFieldWithDefault(t,1,0),cid:n.Message.getFieldWithDefault(t,2,""),blob:t.getBlob_asB64(),ts:n.Message.getFieldWithDefault(t,10,0)};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.IMResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.IMResponse;return proto.IMNut.IMResponse.deserializeBinaryFromReader(a,t)},proto.IMNut.IMResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readEnum();e.setOperation(a);break;case 2:a=t.readString();e.setCid(a);break;case 3:a=t.readBytes();e.setBlob(a);break;case 10:a=t.readInt64();e.setTs(a);break;default:t.skipField()}}return e},proto.IMNut.IMResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.IMResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.IMResponse.serializeBinaryToWriter=function(e,t){var a=void 0;0!==(a=e.getOperation())&&t.writeEnum(1,a),(a=e.getCid()).length>0&&t.writeString(2,a),(a=e.getBlob_asU8()).length>0&&t.writeBytes(3,a),0!==(a=e.getTs())&&t.writeInt64(10,a)},proto.IMNut.IMResponse.prototype.getOperation=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.IMNut.IMResponse.prototype.setOperation=function(e){n.Message.setProto3EnumField(this,1,e)},proto.IMNut.IMResponse.prototype.getCid=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.IMResponse.prototype.setCid=function(e){n.Message.setProto3StringField(this,2,e)},proto.IMNut.IMResponse.prototype.getBlob=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.IMNut.IMResponse.prototype.getBlob_asB64=function(){return n.Message.bytesAsB64(this.getBlob())},proto.IMNut.IMResponse.prototype.getBlob_asU8=function(){return n.Message.bytesAsU8(this.getBlob())},proto.IMNut.IMResponse.prototype.setBlob=function(e){n.Message.setProto3BytesField(this,3,e)},proto.IMNut.IMResponse.prototype.getTs=function(){return n.Message.getFieldWithDefault(this,10,0)},proto.IMNut.IMResponse.prototype.setTs=function(e){n.Message.setProto3IntField(this,10,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.OpResult.prototype.toObject=function(e){return proto.IMNut.OpResult.toObject(e,this)},proto.IMNut.OpResult.toObject=function(e,t){var a={code:n.Message.getFieldWithDefault(t,1,0),msg:n.Message.getFieldWithDefault(t,2,""),blob:t.getBlob_asB64()};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.OpResult.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.OpResult;return proto.IMNut.OpResult.deserializeBinaryFromReader(a,t)},proto.IMNut.OpResult.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readEnum();e.setCode(a);break;case 2:a=t.readString();e.setMsg(a);break;case 3:a=t.readBytes();e.setBlob(a);break;default:t.skipField()}}return e},proto.IMNut.OpResult.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.OpResult.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.OpResult.serializeBinaryToWriter=function(e,t){var a=void 0;0!==(a=e.getCode())&&t.writeEnum(1,a),(a=e.getMsg()).length>0&&t.writeString(2,a),(a=e.getBlob_asU8()).length>0&&t.writeBytes(3,a)},proto.IMNut.OpResult.prototype.getCode=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.IMNut.OpResult.prototype.setCode=function(e){n.Message.setProto3EnumField(this,1,e)},proto.IMNut.OpResult.prototype.getMsg=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.OpResult.prototype.setMsg=function(e){n.Message.setProto3StringField(this,2,e)},proto.IMNut.OpResult.prototype.getBlob=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.IMNut.OpResult.prototype.getBlob_asB64=function(){return n.Message.bytesAsB64(this.getBlob())},proto.IMNut.OpResult.prototype.getBlob_asU8=function(){return n.Message.bytesAsU8(this.getBlob())},proto.IMNut.OpResult.prototype.setBlob=function(e){n.Message.setProto3BytesField(this,3,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.TgtMsgPush.prototype.toObject=function(e){return proto.IMNut.TgtMsgPush.toObject(e,this)},proto.IMNut.TgtMsgPush.toObject=function(e,t){var a={c:n.Message.getFieldWithDefault(t,1,"")};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.TgtMsgPush.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.TgtMsgPush;return proto.IMNut.TgtMsgPush.deserializeBinaryFromReader(a,t)},proto.IMNut.TgtMsgPush.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setC(a);break;default:t.skipField()}}return e},proto.IMNut.TgtMsgPush.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.TgtMsgPush.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.TgtMsgPush.serializeBinaryToWriter=function(e,t){var a;(a=e.getC()).length>0&&t.writeString(1,a)},proto.IMNut.TgtMsgPush.prototype.getC=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.TgtMsgPush.prototype.setC=function(e){n.Message.setProto3StringField(this,1,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.TgtPeerState.prototype.toObject=function(e){return proto.IMNut.TgtPeerState.toObject(e,this)},proto.IMNut.TgtPeerState.toObject=function(e,t){var a={cid:n.Message.getFieldWithDefault(t,1,""),login:n.Message.getFieldWithDefault(t,2,!1)};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.TgtPeerState.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.TgtPeerState;return proto.IMNut.TgtPeerState.deserializeBinaryFromReader(a,t)},proto.IMNut.TgtPeerState.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setCid(a);break;case 2:a=t.readBool();e.setLogin(a);break;default:t.skipField()}}return e},proto.IMNut.TgtPeerState.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.TgtPeerState.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.TgtPeerState.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getCid()).length>0&&t.writeString(1,a),(a=e.getLogin())&&t.writeBool(2,a)},proto.IMNut.TgtPeerState.prototype.getCid=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.TgtPeerState.prototype.setCid=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.TgtPeerState.prototype.getLogin=function(){return n.Message.getFieldWithDefault(this,2,!1)},proto.IMNut.TgtPeerState.prototype.setLogin=function(e){n.Message.setProto3BooleanField(this,2,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.MessagePull.prototype.toObject=function(e){return proto.IMNut.MessagePull.toObject(e,this)},proto.IMNut.MessagePull.toObject=function(e,t){var a={convid:n.Message.getFieldWithDefault(t,1,""),msgid:n.Message.getFieldWithDefault(t,2,0),direct:n.Message.getFieldWithDefault(t,3,!1),limit:n.Message.getFieldWithDefault(t,4,0)};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.MessagePull.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.MessagePull;return proto.IMNut.MessagePull.deserializeBinaryFromReader(a,t)},proto.IMNut.MessagePull.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setConvid(a);break;case 2:a=t.readInt64();e.setMsgid(a);break;case 3:a=t.readBool();e.setDirect(a);break;case 4:a=t.readInt32();e.setLimit(a);break;default:t.skipField()}}return e},proto.IMNut.MessagePull.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.MessagePull.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.MessagePull.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getConvid()).length>0&&t.writeString(1,a),0!==(a=e.getMsgid())&&t.writeInt64(2,a),(a=e.getDirect())&&t.writeBool(3,a),0!==(a=e.getLimit())&&t.writeInt32(4,a)},proto.IMNut.MessagePull.prototype.getConvid=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.MessagePull.prototype.setConvid=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.MessagePull.prototype.getMsgid=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.IMNut.MessagePull.prototype.setMsgid=function(e){n.Message.setProto3IntField(this,2,e)},proto.IMNut.MessagePull.prototype.getDirect=function(){return n.Message.getFieldWithDefault(this,3,!1)},proto.IMNut.MessagePull.prototype.setDirect=function(e){n.Message.setProto3BooleanField(this,3,e)},proto.IMNut.MessagePull.prototype.getLimit=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.IMNut.MessagePull.prototype.setLimit=function(e){n.Message.setProto3IntField(this,4,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.MessageUpdate.prototype.toObject=function(e){return proto.IMNut.MessageUpdate.toObject(e,this)},proto.IMNut.MessageUpdate.toObject=function(e,t){var a={convid:n.Message.getFieldWithDefault(t,1,""),msgid:n.Message.getFieldWithDefault(t,2,0)};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.MessageUpdate.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.MessageUpdate;return proto.IMNut.MessageUpdate.deserializeBinaryFromReader(a,t)},proto.IMNut.MessageUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setConvid(a);break;case 2:a=t.readInt64();e.setMsgid(a);break;default:t.skipField()}}return e},proto.IMNut.MessageUpdate.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.MessageUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.MessageUpdate.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getConvid()).length>0&&t.writeString(1,a),0!==(a=e.getMsgid())&&t.writeInt64(2,a)},proto.IMNut.MessageUpdate.prototype.getConvid=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.MessageUpdate.prototype.setConvid=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.MessageUpdate.prototype.getMsgid=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.IMNut.MessageUpdate.prototype.setMsgid=function(e){n.Message.setProto3IntField(this,2,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.TgtGroupMemberAdded.prototype.toObject=function(e){return proto.IMNut.TgtGroupMemberAdded.toObject(e,this)},proto.IMNut.TgtGroupMemberAdded.toObject=function(e,t){var a={convid:n.Message.getFieldWithDefault(t,1,""),invitor:n.Message.getFieldWithDefault(t,2,"")};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.TgtGroupMemberAdded.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.TgtGroupMemberAdded;return proto.IMNut.TgtGroupMemberAdded.deserializeBinaryFromReader(a,t)},proto.IMNut.TgtGroupMemberAdded.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setConvid(a);break;case 2:a=t.readString();e.setInvitor(a);break;default:t.skipField()}}return e},proto.IMNut.TgtGroupMemberAdded.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.TgtGroupMemberAdded.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.TgtGroupMemberAdded.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getConvid()).length>0&&t.writeString(1,a),(a=e.getInvitor()).length>0&&t.writeString(2,a)},proto.IMNut.TgtGroupMemberAdded.prototype.getConvid=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.TgtGroupMemberAdded.prototype.setConvid=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.TgtGroupMemberAdded.prototype.getInvitor=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.TgtGroupMemberAdded.prototype.setInvitor=function(e){n.Message.setProto3StringField(this,2,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.TgtGroupMemberRemoved.prototype.toObject=function(e){return proto.IMNut.TgtGroupMemberRemoved.toObject(e,this)},proto.IMNut.TgtGroupMemberRemoved.toObject=function(e,t){var a={convid:n.Message.getFieldWithDefault(t,1,""),leaver:n.Message.getFieldWithDefault(t,2,""),kicker:n.Message.getFieldWithDefault(t,3,"")};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.TgtGroupMemberRemoved.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.TgtGroupMemberRemoved;return proto.IMNut.TgtGroupMemberRemoved.deserializeBinaryFromReader(a,t)},proto.IMNut.TgtGroupMemberRemoved.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setConvid(a);break;case 2:a=t.readString();e.setLeaver(a);break;case 3:a=t.readString();e.setKicker(a);break;default:t.skipField()}}return e},proto.IMNut.TgtGroupMemberRemoved.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.TgtGroupMemberRemoved.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.TgtGroupMemberRemoved.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getConvid()).length>0&&t.writeString(1,a),(a=e.getLeaver()).length>0&&t.writeString(2,a),(a=e.getKicker()).length>0&&t.writeString(3,a)},proto.IMNut.TgtGroupMemberRemoved.prototype.getConvid=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.TgtGroupMemberRemoved.prototype.setConvid=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.TgtGroupMemberRemoved.prototype.getLeaver=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.TgtGroupMemberRemoved.prototype.setLeaver=function(e){n.Message.setProto3StringField(this,2,e)},proto.IMNut.TgtGroupMemberRemoved.prototype.getKicker=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.IMNut.TgtGroupMemberRemoved.prototype.setKicker=function(e){n.Message.setProto3StringField(this,3,e)},proto.IMNut.MchMsg.repeatedFields_=[2],n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.MchMsg.prototype.toObject=function(e){return proto.IMNut.MchMsg.toObject(e,this)},proto.IMNut.MchMsg.toObject=function(e,t){var a={fromid:n.Message.getFieldWithDefault(t,1,""),tocidList:n.Message.getRepeatedField(t,2),message:t.getMessage_asB64(),hash:n.Message.getFieldWithDefault(t,4,""),ts:n.Message.getFieldWithDefault(t,5,0)};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.MchMsg.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.MchMsg;return proto.IMNut.MchMsg.deserializeBinaryFromReader(a,t)},proto.IMNut.MchMsg.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setFromid(a);break;case 2:a=t.readString();e.addTocid(a);break;case 3:a=t.readBytes();e.setMessage(a);break;case 4:a=t.readString();e.setHash(a);break;case 5:a=t.readInt64();e.setTs(a);break;default:t.skipField()}}return e},proto.IMNut.MchMsg.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.MchMsg.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.MchMsg.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getFromid()).length>0&&t.writeString(1,a),(a=e.getTocidList()).length>0&&t.writeRepeatedString(2,a),(a=e.getMessage_asU8()).length>0&&t.writeBytes(3,a),(a=e.getHash()).length>0&&t.writeString(4,a),0!==(a=e.getTs())&&t.writeInt64(5,a)},proto.IMNut.MchMsg.prototype.getFromid=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.MchMsg.prototype.setFromid=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.MchMsg.prototype.getTocidList=function(){return n.Message.getRepeatedField(this,2)},proto.IMNut.MchMsg.prototype.setTocidList=function(e){n.Message.setField(this,2,e||[])},proto.IMNut.MchMsg.prototype.addTocid=function(e,t){n.Message.addToRepeatedField(this,2,e,t)},proto.IMNut.MchMsg.prototype.clearTocidList=function(){this.setTocidList([])},proto.IMNut.MchMsg.prototype.getMessage=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.IMNut.MchMsg.prototype.getMessage_asB64=function(){return n.Message.bytesAsB64(this.getMessage())},proto.IMNut.MchMsg.prototype.getMessage_asU8=function(){return n.Message.bytesAsU8(this.getMessage())},proto.IMNut.MchMsg.prototype.setMessage=function(e){n.Message.setProto3BytesField(this,3,e)},proto.IMNut.MchMsg.prototype.getHash=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.IMNut.MchMsg.prototype.setHash=function(e){n.Message.setProto3StringField(this,4,e)},proto.IMNut.MchMsg.prototype.getTs=function(){return n.Message.getFieldWithDefault(this,5,0)},proto.IMNut.MchMsg.prototype.setTs=function(e){n.Message.setProto3IntField(this,5,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.TgtMchMsg.prototype.toObject=function(e){return proto.IMNut.TgtMchMsg.toObject(e,this)},proto.IMNut.TgtMchMsg.toObject=function(e,t){var a,o={fromid:n.Message.getFieldWithDefault(t,1,""),title:n.Message.getFieldWithDefault(t,2,""),avatar:n.Message.getFieldWithDefault(t,3,""),msg:(a=t.getMsg())&&s.Msg.toObject(e,a),ts:n.Message.getFieldWithDefault(t,5,0)};return e&&(o.$jspbMessageInstance=t),o}),proto.IMNut.TgtMchMsg.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.TgtMchMsg;return proto.IMNut.TgtMchMsg.deserializeBinaryFromReader(a,t)},proto.IMNut.TgtMchMsg.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setFromid(a);break;case 2:a=t.readString();e.setTitle(a);break;case 3:a=t.readString();e.setAvatar(a);break;case 4:a=new s.Msg;t.readMessage(a,s.Msg.deserializeBinaryFromReader),e.setMsg(a);break;case 5:a=t.readInt64();e.setTs(a);break;default:t.skipField()}}return e},proto.IMNut.TgtMchMsg.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.TgtMchMsg.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.TgtMchMsg.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getFromid()).length>0&&t.writeString(1,a),(a=e.getTitle()).length>0&&t.writeString(2,a),(a=e.getAvatar()).length>0&&t.writeString(3,a),null!=(a=e.getMsg())&&t.writeMessage(4,a,s.Msg.serializeBinaryToWriter),0!==(a=e.getTs())&&t.writeInt64(5,a)},proto.IMNut.TgtMchMsg.prototype.getFromid=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.TgtMchMsg.prototype.setFromid=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.TgtMchMsg.prototype.getTitle=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.TgtMchMsg.prototype.setTitle=function(e){n.Message.setProto3StringField(this,2,e)},proto.IMNut.TgtMchMsg.prototype.getAvatar=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.IMNut.TgtMchMsg.prototype.setAvatar=function(e){n.Message.setProto3StringField(this,3,e)},proto.IMNut.TgtMchMsg.prototype.getMsg=function(){return n.Message.getWrapperField(this,s.Msg,4)},proto.IMNut.TgtMchMsg.prototype.setMsg=function(e){n.Message.setWrapperField(this,4,e)},proto.IMNut.TgtMchMsg.prototype.clearMsg=function(){this.setMsg(void 0)},proto.IMNut.TgtMchMsg.prototype.hasMsg=function(){return null!=n.Message.getField(this,4)},proto.IMNut.TgtMchMsg.prototype.getTs=function(){return n.Message.getFieldWithDefault(this,5,0)},proto.IMNut.TgtMchMsg.prototype.setTs=function(e){n.Message.setProto3IntField(this,5,e)},proto.IMNut.BotMsg.repeatedFields_=[3],n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.BotMsg.prototype.toObject=function(e){return proto.IMNut.BotMsg.toObject(e,this)},proto.IMNut.BotMsg.toObject=function(e,t){var a={botid:n.Message.getFieldWithDefault(t,1,""),fromcid:n.Message.getFieldWithDefault(t,2,""),tocidList:n.Message.getRepeatedField(t,3),message:t.getMessage_asB64(),hash:n.Message.getFieldWithDefault(t,5,""),ts:n.Message.getFieldWithDefault(t,6,0)};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.BotMsg.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.BotMsg;return proto.IMNut.BotMsg.deserializeBinaryFromReader(a,t)},proto.IMNut.BotMsg.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setBotid(a);break;case 2:a=t.readString();e.setFromcid(a);break;case 3:a=t.readString();e.addTocid(a);break;case 4:a=t.readBytes();e.setMessage(a);break;case 5:a=t.readString();e.setHash(a);break;case 6:a=t.readInt64();e.setTs(a);break;default:t.skipField()}}return e},proto.IMNut.BotMsg.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.BotMsg.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.BotMsg.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getBotid()).length>0&&t.writeString(1,a),(a=e.getFromcid()).length>0&&t.writeString(2,a),(a=e.getTocidList()).length>0&&t.writeRepeatedString(3,a),(a=e.getMessage_asU8()).length>0&&t.writeBytes(4,a),(a=e.getHash()).length>0&&t.writeString(5,a),0!==(a=e.getTs())&&t.writeInt64(6,a)},proto.IMNut.BotMsg.prototype.getBotid=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.BotMsg.prototype.setBotid=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.BotMsg.prototype.getFromcid=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.BotMsg.prototype.setFromcid=function(e){n.Message.setProto3StringField(this,2,e)},proto.IMNut.BotMsg.prototype.getTocidList=function(){return n.Message.getRepeatedField(this,3)},proto.IMNut.BotMsg.prototype.setTocidList=function(e){n.Message.setField(this,3,e||[])},proto.IMNut.BotMsg.prototype.addTocid=function(e,t){n.Message.addToRepeatedField(this,3,e,t)},proto.IMNut.BotMsg.prototype.clearTocidList=function(){this.setTocidList([])},proto.IMNut.BotMsg.prototype.getMessage=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.IMNut.BotMsg.prototype.getMessage_asB64=function(){return n.Message.bytesAsB64(this.getMessage())},proto.IMNut.BotMsg.prototype.getMessage_asU8=function(){return n.Message.bytesAsU8(this.getMessage())},proto.IMNut.BotMsg.prototype.setMessage=function(e){n.Message.setProto3BytesField(this,4,e)},proto.IMNut.BotMsg.prototype.getHash=function(){return n.Message.getFieldWithDefault(this,5,"")},proto.IMNut.BotMsg.prototype.setHash=function(e){n.Message.setProto3StringField(this,5,e)},proto.IMNut.BotMsg.prototype.getTs=function(){return n.Message.getFieldWithDefault(this,6,0)},proto.IMNut.BotMsg.prototype.setTs=function(e){n.Message.setProto3IntField(this,6,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.TgtBotMsg.prototype.toObject=function(e){return proto.IMNut.TgtBotMsg.toObject(e,this)},proto.IMNut.TgtBotMsg.toObject=function(e,t){var a={cid:n.Message.getFieldWithDefault(t,1,""),message:t.getMessage_asB64(),ts:n.Message.getFieldWithDefault(t,3,0)};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.TgtBotMsg.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.TgtBotMsg;return proto.IMNut.TgtBotMsg.deserializeBinaryFromReader(a,t)},proto.IMNut.TgtBotMsg.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setCid(a);break;case 2:a=t.readBytes();e.setMessage(a);break;case 3:a=t.readInt64();e.setTs(a);break;default:t.skipField()}}return e},proto.IMNut.TgtBotMsg.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.TgtBotMsg.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.TgtBotMsg.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getCid()).length>0&&t.writeString(1,a),(a=e.getMessage_asU8()).length>0&&t.writeBytes(2,a),0!==(a=e.getTs())&&t.writeInt64(3,a)},proto.IMNut.TgtBotMsg.prototype.getCid=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.TgtBotMsg.prototype.setCid=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.TgtBotMsg.prototype.getMessage=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.TgtBotMsg.prototype.getMessage_asB64=function(){return n.Message.bytesAsB64(this.getMessage())},proto.IMNut.TgtBotMsg.prototype.getMessage_asU8=function(){return n.Message.bytesAsU8(this.getMessage())},proto.IMNut.TgtBotMsg.prototype.setMessage=function(e){n.Message.setProto3BytesField(this,2,e)},proto.IMNut.TgtBotMsg.prototype.getTs=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.IMNut.TgtBotMsg.prototype.setTs=function(e){n.Message.setProto3IntField(this,3,e)},proto.IMNut.IMOperation={DEFAULT:0,CLIENTOPEN:1,CLIENTCLOSE:2,CLIENTQUERY:3,CLIENTONLINESTATE:4,CONVERSATIONCREATION:1e3,CONVERSATIONMEMBERADD:1001,CONVERSATIONMEMBERREMOVE:1002,CONVERSATIONQUERY:1003,CONVERSATIONUPDATENAME:1004,CONVERSATIONLEAVE:1005,CONVERSATIONGROUPINFO:1006,CONVERSATIONGROUPJOIN:1007,CONVERSATIONGROUPNICK:1008,CONVERSATIONMEMBERADDED:1100,CONVERSATIONMEMBERREMOVED:1101,CONVERSATIONMESSAGESEND:2e3,CONVERSATIONMESSAGEUPDATE:2001,CONVERSATIONMESSAGEQUERY:2002,CONVERSATIONENTER:2003,CONVERSATIONEXIT:2004,CONVERSATIONMESSAGEREAD:2005,CONVERSATIONMESSAGEPUSH:2010,CONVERSATIONMESSAGEPULL:2011,SENDBOTMESSAGE:2100,SENDMCHMESSAGE:2101,TARGETMESSAGEPUSH:3e3,TARGETMESSAGESEND:3001,TARGETCONVPEERSTATE:3002,TARGETMESSAGEREAD:3003,TARGETBOTMESSAGE:3100,TARGETMCHMESSAGE:3101,ACK:4e3,ACKCLIENTOPEN:4001},proto.IMNut.Code={SUCCESS:0,ERRNOPERMISSION:1,ERRFAILED:2},proto.IMNut.OnlineState={NORMAL:0,LEAVE:1},o.object.extend(t,proto.IMNut)},175:function(e,t,a){var n=a(75),o=n,r=Function("return this")();o.exportSymbol("proto.IMNut.AuxiliaryType",null,r),o.exportSymbol("proto.IMNut.GroupInviteType",null,r),o.exportSymbol("proto.IMNut.GroupKickMsg",null,r),o.exportSymbol("proto.IMNut.GroupMsg",null,r),o.exportSymbol("proto.IMNut.RedpacketOpenedMsg",null,r),proto.IMNut.RedpacketOpenedMsg=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.RedpacketOpenedMsg,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.RedpacketOpenedMsg.displayName="proto.IMNut.RedpacketOpenedMsg"),proto.IMNut.GroupMsg=function(e){n.Message.initialize(this,e,0,-1,proto.IMNut.GroupMsg.repeatedFields_,null)},o.inherits(proto.IMNut.GroupMsg,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.GroupMsg.displayName="proto.IMNut.GroupMsg"),proto.IMNut.GroupKickMsg=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.GroupKickMsg,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.GroupKickMsg.displayName="proto.IMNut.GroupKickMsg"),n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.RedpacketOpenedMsg.prototype.toObject=function(e){return proto.IMNut.RedpacketOpenedMsg.toObject(e,this)},proto.IMNut.RedpacketOpenedMsg.toObject=function(e,t){var a={msgid:n.Message.getFieldWithDefault(t,1,0),rpid:n.Message.getFieldWithDefault(t,2,""),convid:n.Message.getFieldWithDefault(t,3,"")};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.RedpacketOpenedMsg.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.RedpacketOpenedMsg;return proto.IMNut.RedpacketOpenedMsg.deserializeBinaryFromReader(a,t)},proto.IMNut.RedpacketOpenedMsg.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readInt64();e.setMsgid(a);break;case 2:a=t.readString();e.setRpid(a);break;case 3:a=t.readString();e.setConvid(a);break;default:t.skipField()}}return e},proto.IMNut.RedpacketOpenedMsg.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.RedpacketOpenedMsg.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.RedpacketOpenedMsg.serializeBinaryToWriter=function(e,t){var a=void 0;0!==(a=e.getMsgid())&&t.writeInt64(1,a),(a=e.getRpid()).length>0&&t.writeString(2,a),(a=e.getConvid()).length>0&&t.writeString(3,a)},proto.IMNut.RedpacketOpenedMsg.prototype.getMsgid=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.IMNut.RedpacketOpenedMsg.prototype.setMsgid=function(e){n.Message.setProto3IntField(this,1,e)},proto.IMNut.RedpacketOpenedMsg.prototype.getRpid=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.RedpacketOpenedMsg.prototype.setRpid=function(e){n.Message.setProto3StringField(this,2,e)},proto.IMNut.RedpacketOpenedMsg.prototype.getConvid=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.IMNut.RedpacketOpenedMsg.prototype.setConvid=function(e){n.Message.setProto3StringField(this,3,e)},proto.IMNut.GroupMsg.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.GroupMsg.prototype.toObject=function(e){return proto.IMNut.GroupMsg.toObject(e,this)},proto.IMNut.GroupMsg.toObject=function(e,t){var a={cidsList:n.Message.getRepeatedField(t,1),invitor:n.Message.getFieldWithDefault(t,2,""),invitetype:n.Message.getFieldWithDefault(t,3,0)};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.GroupMsg.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.GroupMsg;return proto.IMNut.GroupMsg.deserializeBinaryFromReader(a,t)},proto.IMNut.GroupMsg.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.addCids(a);break;case 2:a=t.readString();e.setInvitor(a);break;case 3:a=t.readEnum();e.setInvitetype(a);break;default:t.skipField()}}return e},proto.IMNut.GroupMsg.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.GroupMsg.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.GroupMsg.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getCidsList()).length>0&&t.writeRepeatedString(1,a),(a=e.getInvitor()).length>0&&t.writeString(2,a),0!==(a=e.getInvitetype())&&t.writeEnum(3,a)},proto.IMNut.GroupMsg.prototype.getCidsList=function(){return n.Message.getRepeatedField(this,1)},proto.IMNut.GroupMsg.prototype.setCidsList=function(e){n.Message.setField(this,1,e||[])},proto.IMNut.GroupMsg.prototype.addCids=function(e,t){n.Message.addToRepeatedField(this,1,e,t)},proto.IMNut.GroupMsg.prototype.clearCidsList=function(){this.setCidsList([])},proto.IMNut.GroupMsg.prototype.getInvitor=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.GroupMsg.prototype.setInvitor=function(e){n.Message.setProto3StringField(this,2,e)},proto.IMNut.GroupMsg.prototype.getInvitetype=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.IMNut.GroupMsg.prototype.setInvitetype=function(e){n.Message.setProto3EnumField(this,3,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.GroupKickMsg.prototype.toObject=function(e){return proto.IMNut.GroupKickMsg.toObject(e,this)},proto.IMNut.GroupKickMsg.toObject=function(e,t){var a={kicker:n.Message.getFieldWithDefault(t,1,""),cid:n.Message.getFieldWithDefault(t,2,"")};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.GroupKickMsg.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.GroupKickMsg;return proto.IMNut.GroupKickMsg.deserializeBinaryFromReader(a,t)},proto.IMNut.GroupKickMsg.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setKicker(a);break;case 2:a=t.readString();e.setCid(a);break;default:t.skipField()}}return e},proto.IMNut.GroupKickMsg.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.GroupKickMsg.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.GroupKickMsg.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getKicker()).length>0&&t.writeString(1,a),(a=e.getCid()).length>0&&t.writeString(2,a)},proto.IMNut.GroupKickMsg.prototype.getKicker=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.GroupKickMsg.prototype.setKicker=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.GroupKickMsg.prototype.getCid=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.GroupKickMsg.prototype.setCid=function(e){n.Message.setProto3StringField(this,2,e)},proto.IMNut.AuxiliaryType={REDPACKETOPENED:0,GROUP:1,GROUPKICK:2},proto.IMNut.GroupInviteType={INVITOR:0,INVITEE:1},o.object.extend(t,proto.IMNut)},176:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},19:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(3),o=a(2),r=a(4),s=a(5),i=a(6),u=a(27),l=a(11),c=a(35),d=a(17),p=a(26),g=Object.freeze({STATE_IDLE:"authorizationStateIdle",STATE_WAIT:"authorizationStateWait",STATE_FAILED:"authorizationStateFailed",STATE_LOGIN:"authorizationStateLogin",STATE_LOGOUT:"authorizationStateLogout"}),h=new(function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).onUpdate=function(t){switch(t["@type"]){case"updateAuthState":var a=t.data;e.current=a,console.log("authorization_state: ",a),e.save(a);var n=a.uid,o={cid:n,uid:n,avatar:a.avatar,nick:a.nick};c.a.set(o),p.a.saveUser(o.cid,o),e.emit(t["@type"],t)}},e.onClientUpdate=function(t){switch(t["@type"]){case"clientLogout":e.reset(),e.clear(),e.emit(t["@type"],t)}},e.reset=function(){e.current=null},e.reset(),e.load(),e.addIMListener(),e.setMaxListeners(1/0),e}return Object(i.a)(t,e),Object(o.a)(t,[{key:"addIMListener",value:function(){l.a.addListener("update",this.onUpdate),l.a.addListener("clientUpdate",this.onClientUpdate)}},{key:"load",value:function(){try{var e=localStorage.getItem(d.g);this.current=e?JSON.parse(e):null}catch(t){}}},{key:"save",value:function(e){e?localStorage.setItem(d.g,JSON.stringify(e)):localStorage.removeItem(d.g)}},{key:"clear",value:function(){this.save()}}]),t}(u.EventEmitter));window.authorization=h,t.b=h},191:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){},218:function(e,t,a){},219:function(e,t,a){},22:function(e,t,a){"use strict";var n=a(9),o=a.n(n),r=a(15),s=a(3),i=a(2),u=a(4),l=a(5),c=a(6),d=a(27),p=a(11),g=new(function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).reset=function(){e.db=null,e.urls=new WeakMap,e.dataUrls=new Map,e.items=new Map},e.onUpdate=function(){var t=Object(r.a)(o.a.mark((function t(a){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a["@type"],t.next="updateFile"===t.t0?3:"downloadFile"===t.t0?7:9;break;case 3:return e.set(a.file),e.onUpdateFile(a),e.emit(a["@type"],a),t.abrupt("break",10);case 7:n=a.url,r=a.file,e.set(n,r);case 9:return t.abrupt("break",10);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onClientUpdate=function(t){switch(t["@type"]){case"clientUpdateProgress":e.emit(t["@type"],t)}},e.setDataUrl=function(t,a){e.dataUrls.set(t,a)},e.getDataUrl=function(t){return t&&e.dataUrls.has(t)?e.dataUrls.get(t):null},e.getBlobUrl=function(t){if(!t)return null;if(e.urls.has(t))return e.urls.get(t);var a=URL.createObjectURL(t);return e.urls.set(t,a),a},e.reset(),e.addIMListener(),e.setMaxListeners(1/0),e}return Object(c.a)(t,e),Object(i.a)(t,[{key:"addIMListener",value:function(){p.a.addListener("update",this.onUpdate),p.a.addListener("clientUpdate",this.onClientUpdate)}},{key:"set",value:function(e,t){this.items.set(e,t)}},{key:"get",value:function(e){return this.items.get(e)}}]),t}(d.EventEmitter));window.file=g,t.a=g},221:function(e,t,a){},222:function(e,t,a){},223:function(e,t,a){},224:function(e,t,a){},225:function(e,t,a){},226:function(e,t,a){},227:function(e,t,a){},228:function(e,t,a){},229:function(e,t,a){},230:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){},233:function(e,t,a){},234:function(e,t,a){},243:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(21),s=a.n(r),i=(a(150),a(29)),u=a(3),l=a(2),c=a(4),d=a(5),p=a(6),g=(a(151),a(16)),h=a.n(g),M=a(9),f=a.n(M),I=a(15),m=(a(153),a(7)),v=a(8),y=a(11);function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];console.log("Client openChat"),y.a.clientUpdate({"@type":"clientUpdateOpenChat",chatId:e,messageId:t,popup:a})}var N=a(42),C=a(35),E=(a(176),a(119)),B=a.n(E),O=a(70),k=a.n(O),S=a(19);function A(e){if(!v.a.cacheLoaded)return null;var t=C.a.get(e);return console.log("getUser",e,t,C.a.items),t||(function(e){var t=S.b.current,a=t.auth_state,n=t.access_token,o=t.uid,r=t.open_id;a!==S.a.STATE_LOGIN&&console.error("auth_state failed",a),y.a.getUser(o,n,r,e)}(e),null)}function w(e){var t=function(e){return null==e||0!==e.getType()?null:y.a.state.cid?e.getCidsList().find((function(e){return y.a.state.cid!==e})):null}(e);return t?A(t):null}var F=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onUpdateCache=function(e){a.forceUpdate()},a.updateUser=function(e){a.props.extra===e.user.cid&&a.forceUpdate()},a.handleLoad=function(){a.setState({loaded:!0})},a.state={loaded:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=this.props.chatId,n=this.state.loaded;return e.chatId!==a||t.loaded!==n}},{key:"componentDidMount",value:function(){C.a.on("updateUser",this.updateUser),v.a.on("clientUpdateCacheLoaded",this.onUpdateCache)}},{key:"componentWillUnmount",value:function(){C.a.off("updateUser",this.updateUser),v.a.off("clientUpdateCacheLoaded",this.onUpdateCache)}},{key:"render",value:function(){var e=this.props,t=e.chatId,a=e.big,n=this.state.loaded,r=0===m.a.get(t).type?this.getSingleCover():this.getGroupCover(),s=r&&n,i="tile_color_".concat(Math.abs(t)%8+1);return o.a.createElement("div",{className:h()("chat-tile",Object(N.a)({},i,!s),{"tile-big":a})},r&&o.a.createElement("img",{className:"tile-photo",src:r,onLoad:this.handleLoad,draggable:!1,alt:""}))}},{key:"getSingleCover",value:function(){var e=this.props.extra,t=v.a.cacheLoaded?A(e):null;return t&&t.avatar?t.avatar:k.a}},{key:"getGroupCover",value:function(){return B.a}}]),t}(o.a.Component),T=a(25),R=a(66),U=a.n(R),D=a(37),j=a(10),L=a(17),W=a(38),x=(a(185),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=(e.displaySize,e.chatId),o=e.messageId,r=e.openMedia,s=e.type,i=e.src;j.b.get(a,o);return n.createElement("div",{className:h()(t,"photo",{"photo-big":"message"===s,pointer:r}),onClick:r},i&&n.createElement("img",{className:h()("photo-image"),draggable:!1,src:i,alt:""}))}}]),t}(n.Component));x.defaultProps={size:L.i,thumbnailSize:L.j,displaySize:L.h,showProgress:!0};var P=x,z=a(64),G=a(22),Q=(a(186),a(266)),J=(a(187),{circle:"file-progress-circle"}),q=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onUpdateProgress=function(e){var t=a.props,n=t.chatId,o=t.messageId,r=e.chat_id,s=e.message_id,i=e.progress;n===r&&o===s&&(a.state.progress=i,a.forceUpdate())},a.completeAnimation=!1;var n=a.props.file;return a.state={progress:null,prevPropsFile:n,prevFile:null},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.mount=!0,G.a.on("clientUpdateProgress",this.onUpdateProgress)}},{key:"componentWillUnmount",value:function(){this.mount=!1,G.a.off("clientUpdateProgress",this.onUpdateProgress)}},{key:"render",value:function(){var e=this.state.progress;return e<100?o.a.createElement("div",{className:"file-progress"},o.a.createElement("div",{className:"file-progress-indicator"},o.a.createElement(Q.a,{classes:J,variant:"static",value:e,size:42,thickness:2}))):null}}]),t}(o.a.Component);q.defaultProps={cancelButton:!1,download:!0,upload:!1};var K=q,H=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onClientUpdateDocumentThumbnailBlob=function(e){var t=a.props.thumbnail;if(t){var n=t.photo;if(n){var o=e.fileId;n.id===o&&a.forceUpdate()}}},a.onClientUpdateProgress=function(e){},a.handleLoad=function(){a.setState({loaded:!0})},a.state={loaded:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){G.a.on("clientUpdateDocumentThumbnailBlob",this.onClientUpdateDocumentThumbnailBlob),G.a.on("clientUpdateAudioThumbnailBlob",this.onClientUpdateDocumentThumbnailBlob),G.a.on("",this.onClientUpdateProgress)}},{key:"componentWillUnmount",value:function(){G.a.off("clientUpdateDocumentThumbnailBlob",this.onClientUpdateDocumentThumbnailBlob),G.a.off("clientUpdateAudioThumbnailBlob",this.onClientUpdateDocumentThumbnailBlob)}},{key:"render",value:function(){var e=this.props,t=e.minithumbnail,a=e.thumbnail,n=e.file,r=e.icon,s=e.completeIcon,i=e.openMedia,u=e.chatId,l=e.messageId,c=this.state.loaded,d=t?"data:image/jpeg;base64, "+t.data:null,p=Object(z.c)(a?a.photo:null),g=p&&c,M=p||d;return o.a.createElement("div",{className:h()("document-tile",{"document-tile-image":!M},{pointer:i}),onClick:i},!g&&o.a.createElement("div",{className:"document-tile-background"}),M&&o.a.createElement("img",{className:"tile-photo",src:M,onLoad:this.handleLoad,draggable:!1,alt:""}),n&&o.a.createElement(K,{file:n,thumbnailSrc:M,chatId:u,messageId:l,upload:!0,cancelButton:!0,zIndex:1,icon:r,completeIcon:s}))}}]),t}(o.a.Component),V=a(124),Y=a.n(V),Z=a(123),X=a.n(Z),_=a(47),$=a.n(_),ee=(a(191),function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onUpdateFile=function(e){var t=a.state.file,n=e.file;t&&t.id===n.id&&a.setState({file:n,prevFile:t})};var n=a.props.file;return a.state={prevPropsFile:n,prevFile:null},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){G.a.on("updateFile",this.onUpdateFile)}},{key:"componentWillUnmount",value:function(){G.a.off("updateFile",this.onUpdateFile)}},{key:"shouldComponentUpdate",value:function(e,t){var a=this.props.theme,n=this.state,o=n.file,r=n.prevFile;return e.theme!==a||(t.file!==o||t.prevFile!==r)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.meta,n=e.file;if(!n)return null;n.local&&n.local.is_downloading_active,n.remote&&n.remote.is_uploading_active;var r=Object(z.b)(n.size);console.log("document file:",n);var s="".concat(r);return o.a.createElement("div",{className:h()("document-action",t.documentAction)},o.a.createElement("span",null,s),a)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.file,n=t.prevPropsFile;return a&&n&&a.id!==n.id?{prevPropsFile:a,prevFile:null,file:G.a.get(a.id)||a}:null}}]),t}(o.a.Component)),te=$()((function(e){return{documentAction:{color:e.palette.text.secondary}}}),{withTheme:!0})(ee),ae=(a(212),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).downloadFile=function(e){e&&(e.preventDefault(),e.stopPropagation()),fetch(a.props.document.url).then((function(e){e.blob().then((function(e){var t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=a.props.title,n.click()}))}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.document,a=e.openMedia,o=e.width,r=e.height,s=e.meta,i=e.title;console.log("document: ",t);var u=t.name,l=(t.md5,t.url,t),c=o&&r?{width:o,height:r}:null;return n.createElement("div",{className:h()("document",{"media-title":i}),style:c},n.createElement(H,{file:l,openMedia:a,chatId:this.props.chatId,messageId:this.props.messageId,icon:n.createElement(X.a,null),completeIcon:n.createElement(Y.a,null)}),n.createElement("div",{className:"document-content"},n.createElement("div",{className:"document-title"},n.createElement("a",{onClick:this.downloadFile,className:"document-name",title:u,"data-name":u,"data-ext":"."+Object(z.a)(u)},u)),n.createElement(te,{file:t,meta:s})))}}]),t}(n.Component)),ne=a(68);function oe(e,t){if(!e)return null;var a=[];switch(e.getType()){case ne.MsgType.TEXT:a=new TextDecoder("utf-8").decode(e.getBlob());break;case ne.MsgType.REDPACKET:a="[[[\u6536\u5230\u7ea2\u5305]]]"}return a&&a.length>0?[].concat(Object(D.a)(a),[t]):[]}function re(e){return e?oe(e):null}function se(e,t){var a=j.b.get(e,t);return!!a&&a.state!==j.a.STATE_READ}function ie(e){var t=m.a.get(e);return!!t&&(!!t.type&&0===t.type)}function ue(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];var t=m.a.get(e);if(!t||!t.conv)return null;if(1===t.conv.getType())return t.conv.getName()||le(t.conv);var a=w(t.conv);return a?a.nick:null}function le(e){var t="";return e.getCidsList().forEach((function(e){var a=A(e);a&&a.nick&&(t+=a.nick+",")})),t&&t.slice(0,-1)||"\u672a\u547d\u540d"}function ce(e){return e&&e.last_ts?function(e){var t=new Date(e.getAckts()/1e6),a=new Date;if(a.setHours(0,0,0,0),t>a)return U()(t,"H:MM");var n=new Date,o=n.getDay(),r=n.getDate()-o+(0===o?-6:1);return t>new Date(n.setDate(r))?U()(t,"ddd"):U()(t,"d.mm.yyyy")}(e.last_msg):null}a(213);var de=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).onUpdateCache=function(e){a.forceUpdate()},a.onFastUpdatingComplete=function(e){a.forceUpdate()},a.onUpdateChatTitle=function(e){var t=a.props.chatId;e.chat_id===t&&a.forceUpdate()},a.updateUser=function(e){a.props.extra===e.user.cid&&a.forceUpdate()},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=this.props,n=a.chatId,o=a.t;return e.chatId!==n||e.t!==o}},{key:"componentDidMount",value:function(){m.a.on("clientUpdateFastUpdatingComplete",this.onFastUpdatingComplete),m.a.on("updateChatTitle",this.onUpdateChatTitle),C.a.on("updateUser",this.updateUser),v.a.on("clientUpdateCacheLoaded",this.onUpdateCache)}},{key:"componentWillUnmount",value:function(){m.a.off("clientUpdateFastUpdatingComplete",this.onFastUpdatingComplete),m.a.off("updateChatTitle",this.onUpdateChatTitle),C.a.on("updateUser",this.updateUser),v.a.off("clientUpdateCacheLoaded",this.onUpdateCache)}},{key:"render",value:function(){var e=this.props,t=e.t,a=ue(e.chatId,e.showSavedMessages,t);return o.a.createElement("div",{className:"dialog-title"},o.a.createElement("span",{className:"dialog-title-span"},a))}}]),t}(o.a.Component);de.defaultProps={showSavedMessages:!0};var pe=Object(T.a)()(de),ge=(a(214),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).onClientUpdateClearHistory=function(e){a.props.chatId===e.chatId&&(a.clearHistory=e.inProgress,a.forceUpdate())},a.onFastUpdatingComplete=function(e){a.forceUpdate()},a.onUpdate=function(e){a.props.chatId===e.chatId&&a.forceUpdate()},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=this.props.chatId;return e.chatId!==a}},{key:"componentDidMount",value:function(){m.a.on("tgtMsgSend",this.onUpdate),m.a.on("updateChatLastMessage",this.onUpdate),m.a.on("updateChatReadInbox",this.onUpdate),m.a.on("updateChatUnreadMentionCount",this.onUpdate),m.a.on("updateMessageMentionRead",this.onUpdate)}},{key:"componentWillUnmount",value:function(){m.a.off("tgtMsgSend",this.onUpdate),m.a.off("updateChatLastMessage",this.onUpdate),m.a.off("updateChatReadInbox",this.onUpdate),m.a.off("updateChatUnreadMentionCount",this.onUpdate),m.a.off("updateMessageMentionRead",this.onUpdate)}},{key:"render",value:function(){if(this.clearHistory)return null;var e=this.props.chatId,t=m.a.get(e);if(!t)return null;if(!t.last_msg)return null;console.log("dialogmeta",t);var a=ce(t);return a?o.a.createElement("div",{className:"dialog-meta"},a):null}}]),t}(o.a.Component)),he=(a(215),a(216),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).onUpdate=function(e){a.props.chatId===e.chatId&&a.forceUpdate()},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=this.props,n=a.chatId,o=a.t;return e.chatId!==n||e.t!==o}},{key:"componentDidMount",value:function(){m.a.on("tgtMsgSend",this.onUpdate),m.a.on("msgAcked",this.onUpdate)}},{key:"componentWillUnmount",value:function(){m.a.off("tgtMsgSend",this.onUpdate),m.a.off("msgAcked",this.onUpdate)}},{key:"render",value:function(){var e=this.props,t=e.chatId,a=e.t,o=m.a.get(t),r=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],!e)return null;var t=e.last_msg;return t?re(t):null}(o,a)||"\xa0";ie(t)||function(e){return e?(t=e.last_msg)?t.getCid():null:null;var t}(o);return n.createElement("div",{className:"dialog-content"},r)}}]),t}(n.Component)),Me=Object(T.a)()(he),fe=(a(217),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).onNewMessage=function(e){var t=a.props.chatId;e.chat_id&&e.chat_id===t&&a.forceUpdate()},a.onUpdateMessage=function(e){var t=a.props.chatId;e.chatId===t&&a.forceUpdate()},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=this.props.chatId;return e.chatId!==a}},{key:"componentDidMount",value:function(){j.b.on("tgtMsgSend",this.onNewMessage),j.b.on("msgRead",this.onUpdateMessage)}},{key:"componentWillUnmount",value:function(){j.b.off("tgtMsgSend",this.onNewMessage),j.b.off("msgRead",this.onUpdateMessage)}},{key:"render",value:function(){var e=this.props.chatId;if(!m.a.get(e))return null;var t=j.b.getUnreadByChatId(e),a=t>0;return o.a.createElement(o.a.Fragment,null,a&&o.a.createElement("div",{className:"dialog-badge"},o.a.createElement("span",{className:"dialog-badge-text"},t>0?t:"")))}}]),t}(o.a.Component)),Ie=a(249),me=a(247),ve=a(268),ye=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onClientUpdateChatId=function(e){var t=a.props.chatId;t!==e.previousChatId&&t!==e.nextChatId||a.forceUpdate()},a.handleSelect=function(e){0===e.button&&b(a.props.chatId)},a.handleContextMenu=function(e){e&&(e.preventDefault(),e.stopPropagation());var t=a.props.chatId,n=a.state.contextMenu;if(console.log("handleContextMenu: ",t),n)a.setState({contextMenu:!1});else{var o=e.clientX,r=e.clientY;m.a.get(t);a.setState({contextMenu:!0,left:o,top:r})}},a.handleCloseContextMenu=function(e){e&&e.stopPropagation(),a.setState({contextMenu:!1})},a.handleViewInfo=function(e){a.handleCloseContextMenu(e),b(a.props.chatId,null,!0)},a.getViewInfoTitle=function(){var e=a.props.chatId,t=m.a.get(e);if(t&&t.conv)switch(t.conv.getType()){case 0:return"Single";case 1:return"Group"}},a.dialog=o.a.createRef();var n=m.a.get(a.props.chatId);return a.state={chat:n,contextMenu:!1,left:0,top:0},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t,a){var n=this.props,o=n.chatId,r=(n.t,n.hidden,n.isLastPinned,this.state.contextMenu);return e.chatId!==o||t.contextMenu!==r}},{key:"componentDidMount",value:function(){v.a.on("clientUpdateChatId",this.onClientUpdateChatId)}},{key:"componentWillUnmount",value:function(){v.a.off("clientUpdateChatId",this.onClientUpdateChatId)}},{key:"render",value:function(){var e=this.props.chatId,t=this.state,a=t.contextMenu,n=t.left,r=t.top,s=v.a.getChatId()===e,i=m.a.get(e).extra;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{ref:this.dialog,className:h()(s?"dialog-active":"dialog",{"item-selected":s}),onMouseDown:this.handleSelect,onContextMenu:this.handleContextMenu},o.a.createElement("div",{className:"dialog-wrapper"},o.a.createElement(F,{chatId:e,extra:i}),o.a.createElement("div",{className:"dialog-inner-wrapper"},o.a.createElement("div",{className:"tile-first-row"},o.a.createElement(pe,{chatId:e,extra:i}),o.a.createElement(ge,{chatId:e})),o.a.createElement("div",{className:"tile-second-row"},o.a.createElement(Me,{chatId:e}),o.a.createElement(fe,{chatId:e})))),o.a.createElement(Ie.a,{open:a,onClose:this.handleCloseContextMenu,anchorReference:"anchorPosition",anchorPosition:{top:r,left:n},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},onMouseDown:function(e){return e.stopPropagation()}},o.a.createElement(me.a,{classes:{root:"menu-list"},onClick:function(e){return e.stopPropagation()}},o.a.createElement(ve.a,{onClick:this.handleViewInfo},this.getViewInfoTitle())))))}}]),t}(o.a.Component),be=(a(218),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleScroll=function(){var e=a.listRef.current;e&&e.scrollTop+e.offsetHeight>=e.scrollHeight-L.k&&a.onLoadNext()},a.onQueryConv=function(e){var t=m.a.getSortedItems();a.setState({chats:t},(function(){return a.onLoadNext(!0)}))},a.updateOrder=function(e){var t=m.a.getSortedItems();a.setState({chats:t},(function(){return a.onLoadNext(!0)}))},a.listRef=o.a.createRef(),a.state={chats:null,fistSliceLoaded:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){m.a.on("queryConv",this.onQueryConv),m.a.on("tgtMsgSend",this.updateOrder),m.a.on("msgAcked",this.updateOrder),v.a.on("clientUpdateCacheLoaded",this.updateOrder)}},{key:"componentWillUnmount",value:function(){m.a.off("queryConv",this.onQueryConv),m.a.off("tgtMsgSend",this.updateOrder),m.a.off("msgAcked",this.updateOrder),v.a.off("clientUpdateCacheLoaded",this.updateOrder)}},{key:"getSnapshotBeforeUpdate",value:function(e,t){var a=this.listRef.current;return a?{scrollTop:a.scrollTop}:{scrollTop:0}}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.listRef.current;if(n){var o=a.scrollTop;n.scrollTop=o}}},{key:"scrollToTop",value:function(){this.listRef.current.scrollTop=0}},{key:"render",value:function(){var e=this.state.chats,t=null;return e&&(t=e.map((function(e){return o.a.createElement(ye,{key:e,chatId:e})}))),o.a.createElement("div",{ref:this.listRef,className:"dialogs-list",onScroll:this.handleScroll},t)}},{key:"onLoadNext",value:function(e){}}]),t}(o.a.Component)),Ne=(a(219),a(48)),Ce=a(270),Ee=a(127),Be=a.n(Ee),Oe=a(269),ke=a(45),Se={vertical:"bottom",horizontal:"left"},Ae=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onUpdateAuthorizationState=function(e){a.setState({authorizationState:e.auth_state})},a.handleMenuOpen=function(e){var t=S.b.current.auth_state;Object(W.e)(t)&&(console.log("setState ",e.currentTarget),a.setState({anchorEl:e.currentTarget}))},a.handleMenuClose=function(){a.setState({anchorEl:null})},a.handleLogOut=function(){a.handleMenuClose(),a.props.onLogOut()},a.setRef=function(e){console.log(Object(Ne.a)(a))},a.state={authorizationState:S.b.current,anchorEl:null},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){S.b.on("updateAuthorizationState",this.onUpdateAuthorizationState)}},{key:"componentWillUnmount",value:function(){S.b.off("updateAuthorizationState",this.onUpdateAuthorizationState)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.t,n=this.state.anchorEl,r=S.b.current.auth_state,s=Object(W.e)(r)?o.a.createElement(o.a.Fragment,null,o.a.createElement(Oe.a,{id:"main-menu",anchorEl:n,open:Boolean(n),onClose:this.handleMenuClose,getContentAnchorEl:null,disableAutoFocusItem:!0,disableRestoreFocus:!0,anchorOrigin:Se},o.a.createElement(ve.a,{onClick:this.handleLogOut},a("LogOut")))):null;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ce.a,{"aria-owns":n?"simple-menu":null,"aria-haspopup":"true",className:t.menuIconButton,"aria-label":"Menu",onClick:this.handleMenuOpen},o.a.createElement(Be.a,null)),s)}}]),t}(o.a.Component),we=Object(ke.a)(Object(T.a)(),$()({menuIconButton:{margin:"8px -2px 8px 12px"},searchIconButton:{margin:"8px 12px 8px 0"}},{withTheme:!0}))(Ae),Fe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleLogOut=function(){a.setState({open:!0}),y.a.logout()},a.state={open:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.onClick,t=S.b.current?S.b.current.nick:"IMNut";return o.a.createElement("div",{className:"header-master"},o.a.createElement(o.a.Fragment,null,o.a.createElement(we,{onLogOut:this.handleLogOut})),o.a.createElement("div",{className:"header-status grow cursor-pointer",onClick:e},o.a.createElement("span",{className:"header-status-content"},t)))}}]),t}(o.a.Component),Te=a(26),Re=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onClientUpdateChatDetailsVisibility=function(e){var t=v.a.isChatDetailsVisible;a.setState({isChatDetailsVisible:t})},a.handleHeaderClick=function(){a.dialogListRef.current.scrollToTop()};var n=v.a.isChatDetailsVisible;return a.dialogsHeaderRef=o.a.createRef(),a.dialogListRef=o.a.createRef(),a.state={isChatDetailsVisible:n},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t,a){var n=this.state.isChatDetailsVisible;if(t.isChatDetailsVisible!==n)return!0}},{key:"componentDidMount",value:function(){this.loadCache(),v.a.on("clientUpdateChatDetailsVisibility",this.onClientUpdateChatDetailsVisibility)}},{key:"componentWillUnmount",value:function(){v.a.off("clientUpdateChatDetailsVisibility",this.onClientUpdateChatDetailsVisibility)}},{key:"loadCache",value:function(){var e=Object(I.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te.a.loadCache();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:t=e.t0,this.setState({cache:t}),y.a.clientUpdate({"@type":"clientUpdateCacheLoaded"});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.isChatDetailsVisible;return o.a.createElement("div",{className:h()("dialogs",{"dialogs-third-column":e})},o.a.createElement(Fe,{ref:this.dialogsHeaderRef,onClick:this.handleHeaderClick}),o.a.createElement("div",{className:"dialogs-content"},o.a.createElement(be,{ref:this.dialogListRef})))}}]),t}(o.a.Component),Ue=(a(221),function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.date;e.i18n;return o.a.createElement("div",{className:"day-meta"},o.a.createElement("div",{className:"day-meta-wrapper"},o.a.createElement("div",null,new Date(1e3*t).toLocaleDateString("zh-cn",{day:"numeric",month:"long"}))))}}]),t}(o.a.Component)),De=Object(T.a)()(Ue),je=(a(222),a(129)),Le=a.n(je),We=(a(223),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onUpdateCache=function(e){a.forceUpdate()},a.onClientUpdateUserBlob=function(e){a.props.userId===e.userId&&(a.state.loaded?a.setState({loaded:!1}):a.forceUpdate())},a.onClientUpdateChatBlob=function(e){var t=a.props.userId,n=e.chatId,o=m.a.get(n);if(o&&o.type)switch(o.type["@type"]){case"chatTypeBasicGroup":case"chatTypeSupergroup":return;case"chatTypePrivate":case"chatTypeSecret":if(o.type.user_id!==t)return;a.state.loaded?a.setState({loaded:!1}):a.forceUpdate()}},a.onUpdateChatPhoto=function(e){var t=e.chat_id,a=m.a.get(t);a&&a.type},a.onUpdateChatTitle=function(e){var t=a.props.userId,n=m.a.get(e.chat_id);if(n&&n.type)switch(n.type["@type"]){case"chatTypeBasicGroup":case"chatTypeSupergroup":return;case"chatTypePrivate":case"chatTypeSecret":if(n.type.user_id!==t&&!n.photo)return;a.forceUpdate()}},a.handleSelect=function(e){var t=a.props,n=t.userId,o=t.onSelect;o&&(e.stopPropagation(),o(n))},a.handleLoad=function(){a.setState({loaded:!0})},a.state={loaded:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.userId!==this.props.userId||t.loaded!==this.state.loaded}},{key:"componentDidMount",value:function(){G.a.on("clientUpdateUserBlob",this.onClientUpdateUserBlob),G.a.on("clientUpdateChatBlob",this.onClientUpdateChatBlob),m.a.on("updateChatPhoto",this.onUpdateChatPhoto),m.a.on("updateChatTitle",this.onUpdateChatTitle),v.a.on("clientUpdateCacheLoaded",this.onUpdateCache)}},{key:"componentWillUnmount",value:function(){G.a.off("clientUpdateUserBlob",this.onClientUpdateUserBlob),G.a.off("clientUpdateChatBlob",this.onClientUpdateChatBlob),m.a.off("updateChatPhoto",this.onUpdateChatPhoto),m.a.off("updateChatTitle",this.onUpdateChatTitle),v.a.off("clientUpdateCacheLoaded",this.onUpdateCache)}},{key:"render",value:function(){var e=this.props,t=e.userId,a=e.small,n=this.state.loaded,r=C.a.get(t),s=r&&r.avatar?r.avatar:k.a,i=s&&n;return o.a.createElement("div",{className:h()("user-tile",{"tile-small":a}),onClick:this.handleSelect},!i&&o.a.createElement("div",{className:"tile-photo",src:k.a}),s&&o.a.createElement("img",{className:"tile-photo",src:s,onLoad:this.handleLoad,draggable:!1,alt:""}))}}]),t}(n.Component)),xe=(a(224),a(128)),Pe=a.n(xe),ze=a(34),Ge=(Object(ze.a)(o.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.a.createElement("g",{transform:"translate(-3.000000, 0.000000)",fill:"#E53935",fillRule:"nonzero"},o.a.createElement("path",{d:"M10,0.4 C13.6450793,0.4 16.6,3.35492065 16.6,7 C16.6,10.6450793 13.6450793,13.6 10,13.6 C6.35492065,13.6 3.4,10.6450793 3.4,7 C3.4,3.35492065 6.35492065,0.4 10,0.4 Z M10,9.25 C9.58578644,9.25 9.25,9.58578644 9.25,10 C9.25,10.4142136 9.58578644,10.75 10,10.75 C10.4142136,10.75 10.75,10.4142136 10.75,10 C10.75,9.58578644 10.4142136,9.25 10,9.25 Z M10,2.85 C9.64101491,2.85 9.35,3.14101491 9.35,3.5 L9.35,7.5 C9.35,7.85898509 9.64101491,8.15 10,8.15 C10.3589851,8.15 10.65,7.85898509 10.65,7.5 L10.65,3.5 C10.65,3.14101491 10.3589851,2.85 10,2.85 Z"}))),"Error"),Object(ze.a)(o.a.createElement("g",{strokeWidth:"1",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},o.a.createElement("g",{transform:"translate(-3.000000, 0.000000)"},o.a.createElement("circle",{strokeWidth:"1.2",cx:"10",cy:"7",r:"6"}),o.a.createElement("line",{x1:"10",y1:"3.5",x2:"10",y2:"7",strokeWidth:"1.3"}),o.a.createElement("line",{x1:"12",y1:"9",x2:"10",y2:"7",strokeWidth:"1.3"}))),"Pending")),Qe=Object(ze.a)(o.a.createElement("path",{transform:"translate(-4.000000, -2.000000)",d:"M7.96833846,10.0490996 L14.5108251,2.571972 C14.7472185,2.30180819 15.1578642,2.27443181 15.428028,2.51082515 C15.6711754,2.72357915 15.717665,3.07747757 15.5522007,3.34307913 L15.4891749,3.428028 L8.48917485,11.428028 C8.2663359,11.6827011 7.89144111,11.7199091 7.62486888,11.5309823 L7.54038059,11.4596194 L4.54038059,8.45961941 C4.2865398,8.20577862 4.2865398,7.79422138 4.54038059,7.54038059 C4.7688373,7.31192388 5.12504434,7.28907821 5.37905111,7.47184358 L5.45961941,7.54038059 L7.96833846,10.0490996 L14.5108251,2.571972 L7.96833846,10.0490996 Z"}),"Sent"),Je=Object(ze.a)(o.a.createElement("path",{transform:"translate(-1.000000, -2.000000)",d:"M4.96833846,10.0490996 L11.5108251,2.571972 C11.7472185,2.30180819 12.1578642,2.27443181 12.428028,2.51082515 C12.6711754,2.72357915 12.717665,3.07747757 12.5522007,3.34307913 L12.4891749,3.428028 L5.48917485,11.428028 C5.2663359,11.6827011 4.89144111,11.7199091 4.62486888,11.5309823 L4.54038059,11.4596194 L1.54038059,8.45961941 C1.2865398,8.20577862 1.2865398,7.79422138 1.54038059,7.54038059 C1.7688373,7.31192388 2.12504434,7.28907821 2.37905111,7.47184358 L2.45961941,7.54038059 L4.96833846,10.0490996 L11.5108251,2.571972 L4.96833846,10.0490996 Z M9.96833846,10.0490996 L16.5108251,2.571972 C16.7472185,2.30180819 17.1578642,2.27443181 17.428028,2.51082515 C17.6711754,2.72357915 17.717665,3.07747757 17.5522007,3.34307913 L17.4891749,3.428028 L10.4891749,11.428028 C10.2663359,11.6827011 9.89144111,11.7199091 9.62486888,11.5309823 L9.54038059,11.4596194 L8.54038059,10.4596194 C8.2865398,10.2057786 8.2865398,9.79422138 8.54038059,9.54038059 C8.7688373,9.31192388 9.12504434,9.28907821 9.37905111,9.47184358 L9.45961941,9.54038059 L9.96833846,10.0490996 L16.5108251,2.571972 L9.96833846,10.0490996 Z"}),"Succeeded"),qe=(a(225),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={},a.onUpdateMessageSend=function(e){var t=a.props,n=t.chatId,o=t.messageId,r=j.b.get(n,o),s=e.msgId;n===e.chatId&&r.msg.getId()===s&&(console.log("onUpdateMessageSend",e),a.forceUpdate())},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){j.b.on("msgAck",this.onUpdateMessageSend),j.b.on("msgRead",this.onUpdateMessageSend),j.b.on("msgHasRead",this.onUpdateMessageSend)}},{key:"componentWillUnmount",value:function(){j.b.off("msgAck",this.onUpdateMessageSend),j.b.off("msgRead",this.onUpdateMessageSend),j.b.off("msgHasRead",this.onUpdateMessageSend)}},{key:"render",value:function(){var e=this.props,t=e.chatId,a=e.messageId,n=j.b.get(t,a);if(!n)return null;switch(console.log("Status: ",n),n.state){case j.a.STATE_SEND:return o.a.createElement(Ge,{className:"status",viewBox:"0 0 14 14",style:{width:16,height:12,transform:"translate(0, 1px)",stroke:"currentColor"}});case j.a.STATE_ACK:return o.a.createElement(Qe,{className:"status",viewBox:"0 0 12 10",style:{width:16,height:9}});case j.a.STATE_READ:return o.a.createElement(Je,{className:"status",viewBox:"0 0 17 10",style:{width:16,height:9}})}return null}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.chatId,n=e.messageId,o=j.b.get(a,n),r=o?o.state:null;return a!==t.prevChatId||n!==t.prevMessageId?{prevChatId:a,prevMessageId:n,sendingState:r,unread:se(a,n)}:null}}]),t}(o.a.Component)),Ke=(a(226),function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.chatId,n=e.messageId,r=e.date,s=e.editDate,i=e.onDateClick,u=e.t,l=e.views,c=e.style,d=j.b.get(a,n);if(!d)return null;var p=d.msg.getCid()===v.a.getCid(),g=function(e){if(!e)return null;var t=new Date(1e3*e);return U()(t,"H:MM")}(r);return o.a.createElement("div",{className:h()("meta",t),style:c},o.a.createElement("span",null,"\u2002"),l>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Pe.a,{className:"meta-views-icon"}),o.a.createElement("span",{className:"meta-views"},"\xa0",l,"\xa0 \xa0")),s>0&&o.a.createElement("span",null,u("EditedMessage"),"\xa0"),o.a.createElement("a",{onClick:i},o.a.createElement("span",null,g)),p&&o.a.createElement(qe,{chatId:a,messageId:n}))}}]),t}(o.a.Component)),He=Object(T.a)()(Ke),Ve=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.progress;return n.createElement("div",{className:"progress-container"},n.createElement("div",{className:"progress-bar",style:{width:e}}))}}]),t}(n.Component),Ye=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onClientUpdateClearSelection=function(e){a.state.selected&&a.setState({selected:!1})},a.onClientUpdateMessageHighlighted=function(e){var t=a.props,n=t.chatId,o=t.messageId,r=a.state,s=r.selected,i=r.highlighted;s||(n===e.chatId&&o===e.messageId?i?a.setState({highlighted:!1},(function(){setTimeout((function(){a.setState({highlighted:!0})}),0)})):a.setState({highlighted:!0}):i&&a.setState({highlighted:!1}))},a.onClientUpdateMessageSelected=function(e){var t=a.props,n=t.chatId,o=t.messageId,r=e.selected;n===e.chatId&&o===e.messageId&&a.setState({selected:r,highlighted:!1})},a.onUpdateMessageEdited=function(e){var t=e.chat_id,n=e.message_id,o=a.props,r=o.chatId,s=o.messageId;r===t&&s===n&&a.forceUpdate()},a.onUpdateMessageViews=function(e){var t=e.chat_id,n=e.message_id,o=a.props,r=o.chatId,s=o.messageId;r===t&&s===n&&a.forceUpdate()},a.onUpdateMessageProgress=function(e){var t=e.chat_id,n=e.message_id,o=a.props,r=o.chatId,s=o.messageId;r===t&&s===n&&(a.state.uploadProgress=e.progress,a.forceUpdate())},a.onUpdateMessageContent=function(e){var t=e.chat_id,n=e.message_id,o=a.props,r=o.chatId,s=o.messageId,i=a.state.emojiMatches;if(r===t&&s===n){!1!==i?a.setState({emojiMatches:!1}):a.forceUpdate()}},a.handleSelectUser=function(e){},a.handleSelectChat=function(e){b(e,null,!0)},a.handleSelection=function(){a.mouseDown},a.handleAnimationEnd=function(){a.setState({highlighted:!1})},a.handleMouseDown=function(){a.mouseDown=!0},a.handleMouseOver=function(){a.mouseDown=!1},a.handleMouseOut=function(){a.mouseOut=!1},a.handleContextMenu=function(){var e=Object(I.a)(f.a.mark((function e(t){var n,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(t.preventDefault(),t.stopPropagation()),a.state.contextMenu?a.setState({contextMenu:!1}):(n=t.clientX,o=t.clientY,a.setState({contextMenu:!0,left:n,top:o}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleCloseContextMenu=function(e){e&&e.stopPropagation(),a.setState({contextMenu:!1})},a.handleSelect=function(e){var t=a.props;t.chatId,t.messageId;a.handleCloseContextMenu(e)},a.openMedia=function(e){e&&(e.preventDefault(),e.stopPropagation());var t=a.props;!function(e,t){j.b.get(e,t)}(t.chatId,t.messageId)};var n=a.props,o=n.chatId,r=n.messageId;return a.state={message:j.b.get(o,r),selected:!1,highlighted:!1,uploadProgress:0},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=this.props,n=a.theme,o=a.chatId,r=a.messageId,s=a.sendingState,i=a.showUnreadSeparator,u=a.showTail,l=a.showTitle,c=this.state,d=c.contextMenu,p=c.selected,g=c.highlighted,h=c.emojiMatches;return e.theme!==n||(e.chatId!==o||(e.messageId!==r||(e.sendingState!==s||(e.showUnreadSeparator!==i||(e.showTail!==u||(e.showTitle!==l||(t.contextMenu!==d||(t.selected!==p||(t.highlighted!==g||t.emojiMatches!==h)))))))))}},{key:"componentDidMount",value:function(){j.b.on("clientUpdateMessageHighlighted",this.onClientUpdateMessageHighlighted),j.b.on("clientUpdateMessageSelected",this.onClientUpdateMessageSelected),j.b.on("clientUpdateClearSelection",this.onClientUpdateClearSelection),j.b.on("updateMessageContent",this.onUpdateMessageContent),j.b.on("updateMessageEdited",this.onUpdateMessageEdited),j.b.on("updateMessageViews",this.onUpdateMessageViews),j.b.on("updateMessageProgress",this.onUpdateMessageProgress)}},{key:"componentWillUnmount",value:function(){j.b.off("clientUpdateMessageHighlighted",this.onClientUpdateMessageHighlighted),j.b.off("clientUpdateMessageSelected",this.onClientUpdateMessageSelected),j.b.off("clientUpdateClearSelection",this.onClientUpdateClearSelection),j.b.off("updateMessageContent",this.onUpdateMessageContent),j.b.off("updateMessageEdited",this.onUpdateMessageEdited),j.b.off("updateMessageViews",this.onUpdateMessageViews),j.b.off("updateMessageProgress",this.onUpdateMessageProgress)}},{key:"getMessageStyle",value:function(e,t){var a=j.b.get(e,t);if(!a)return null;var n=a.content;if(!n)return null;switch(n["@type"]){case"messageAnimation":var o=n.animation;if(!o)return null;var r=o.width,s=o.height,i=o.thumbnail,u={width:r,height:s}||i;if(!u)return null;var l=Object(W.b)(u,L.h,!1);return l?{width:l.width}:null;case"messagePhoto":var c=n.photo;if(!c)return null;var d=Object(W.c)(c.sizes,L.i);if(!d)return null;var p=Object(W.b)(d,L.h,!1);return p?{width:p.width}:null;case"messageVideo":var g=n.video;if(!g)return null;var h=g.thumbnail,M={width:g.width,height:g.height}||h;if(!M)return null;var f=Object(W.b)(M,L.h);return f?{width:f.width}:null}return null}},{key:"render",value:function(){var e=this.props,t=(e.t,e.chatId),a=e.messageId,n=(e.showUnreadSeparator,e.showTail),r=(e.showTitle,this.state),s=(r.emojiMatches,r.selected,r.highlighted,r.contextMenu,r.left,r.top,r.uploadProgress),i=j.b.get(t,a);if(console.log("Message: ",a,i),!i)return o.a.createElement("div",null,"[empty message]");var u=i.state,l=i.msg,c=i.msg.getCid(),d=c===v.a.getCid(),p=l.getAckts()?new Date(l.getAckts()/1e9):l.getJetts()/1e3,g=oe(l,o.a.createElement(He,{className:"meta-hidden",chatId:t,messageId:a,date:p})),M=function(e,t,a,n){if(!e)return null;switch(e.getType()){case ne.MsgType.PICTURE:var r=ne.Image.deserializeBinary(e.getBlob());return o.a.createElement(P,{type:"message",chatId:a,messageId:n,src:r.getLocalpath()||r.getImgurl(),openMedia:t});case ne.MsgType.FILE:var s=ne.FileBean.deserializeBinary(e.getBlob());console.log("getMedia",{fileBean:s});var i={md5:s.getMd5(),name:s.getName(),url:s.getUrl(),size:s.getSize()};return o.a.createElement(ae,{title:s.getName(),chatId:a,messageId:n,document:i})}return null}(l,this.openMedia,t,a),f=u===j.a.STATE_SEND?o.a.createElement(Ve,{progress:s}):null,I=o.a.createElement(We,{small:!0,userId:c,onSelect:this.handleSelectUser});n&&(I=c?o.a.createElement(We,{small:!0,userId:c,onSelect:this.handleSelectUser}):o.a.createElement(F,{small:!0,chatId:t,onSelect:this.handleSelectChat}));var m=this.getMessageStyle(t,a);return o.a.createElement("div",{className:h()("message",{"message-out":d}),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onMouseDown:this.handleMouseDown,onClick:this.handleSelection,onAnimationEnd:this.handleAnimationEnd,onContextMenu:this.handleContextMenu},o.a.createElement("div",{className:"message-body"},o.a.createElement("div",{className:"message-padding"},o.a.createElement(Le.a,{className:"message-select-tick"})),o.a.createElement("div",{className:h()("message-wrapper",{})},I,o.a.createElement("div",{className:h()("message-content",{"message-bubble":!0,"message-bubble-out":d}),style:m},M,f,o.a.createElement("div",{className:h()("message-text")},g),o.a.createElement(He,{className:h()("meta-text",{"meta-bubble":!1}),chatId:t,messageId:a,date:p})),o.a.createElement("div",{className:"message-tile-padding"})),o.a.createElement("div",{className:"message-padding"})))}}]),t}(n.Component),Ze=Object(ke.a)(Object(T.a)())(Ye),Xe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onNewMessage=function(e){var t=e.chat_id,n=e.msg,o=a.props.chatId;o===t&&(n&&y.a.readMessage(o,n),a.setState({history:j.b.getMessages(o)}),a.scrollToBottom())},a.onLoadCache=function(e){var t=a.props.chatId;a.setState({history:j.b.getMessages(t)}),a.scrollToBottom()},a.onSendMessage=function(e){var t=a.props.chatId;a.setState({history:j.b.getMessages(t)}),a.scrollToBottom()},a.onAckMessage=function(e){var t=a.props.chatId;a.setState({history:j.b.getMessages(t)}),a.scrollToBottom()},a.onReadMessage=function(e){},a.scrollToBottom=function(){var e=a.props,t=(e.chatId,e.messageId,a.listRef.current);t.scrollHeight-t.offsetHeight!==t.scrollTop&&(t.scrollTop=t.scrollHeight-t.offsetHeight)},a.scrollToStart=Object(I.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),a.handleListDragEnter=function(e){e.preventDefault(),e.stopPropagation();a.props.chatId;console.log("handleListDragEnter: ",e)},a.handleScroll=function(){},console.log("MessagesList.ctor chat_id=".concat(e.chatId," message_id=").concat(e.messageId)),a.sessionId=Date.now(),a.state={history:[]},a.listRef=o.a.createRef(),a.itemsRef=o.a.createRef(),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n=this.props,o=n.chatId,r=n.messageId;this.state.scrollDownVisible;e.chatId===o&&e.messageId===r||this.handleSelectChat(o,e.chatId,r,e.messageId)}},{key:"componentDidMount",value:function(){j.b.on("tgtMsgSend",this.onNewMessage),j.b.on("msgAck",this.onAckMessage),j.b.on("clientUpdateMessagesLoaded",this.onLoadCache),j.b.on("msgRead",this.onReadMessage),j.b.on("clientSendMessage",this.onSendMessage)}},{key:"componentWillUnmount",value:function(){j.b.off("tgtMsgSend",this.onNewMessage),j.b.off("msgAck",this.onAckMessage),j.b.off("clientUpdateMessagesLoaded",this.onLoadCache),j.b.off("msgRead",this.onReadMessage),j.b.off("clientSendMessage",this.onSendMessage)}},{key:"shouldComponentUpdate",value:function(e,t,a){var n=this.props,o=n.chatId,r=(n.messageId,n.theme,this.state),s=(r.playerOpened,r.history);r.dragging,r.clearHistory,r.selectionActive,r.scrollDownVisible;return e.chatId!==o?(console.log("[ml] shouldComponentUpdate chatId"),!0):!Object(W.d)(t.history,s)}},{key:"handleSelectChat",value:function(){var e=Object(I.a)(f.a.mark((function e(t,a,n,o){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.a.get(t),m.a.get(a),this.readMessages();case 3:case"end":return e.stop()}}),e,this)})));return function(t,a,n,o){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.chatId,a=j.b.getMessages(t);return this.messages=a?a.map((function(n,r){var s=r>0?a[r-1].msg:null;r<a.length-1&&a[r+1].msg;console.log("msglist",t,n.msg);var i=e.showMessageDate(n.msg,s,0===r),u=Object(j.c)(n.state)?n.msg.getJetts():n.msg.getId(),l=n.msg.getId()?n.msg.getAckts()/1e9:n.msg.getJetts();console.log("MessagesList render messages:",u,n.msg);var c=null;return n.msg&&(c=o.a.createElement(Ze,{key:"chat_id=".concat(n.msg.getConversationid()," message_id=").concat(u),ref:function(t){return e.itemsMap.set(r,t)},chatId:n.msg.getConversationid(),messageId:u,showTitle:!1,showTail:!1,showUnreadSeparator:!1})),o.a.createElement("div",{key:"chat_id=".concat(n.msg.getConversationid()," message_id=").concat(u)},i&&o.a.createElement(De,{date:l}),c)})):null,o.a.createElement("div",{className:"messages-list",onDragEnter:this.handleListDragEnter},o.a.createElement("div",{ref:this.listRef,className:"messages-list-wrapper",onScroll:this.handleScroll},o.a.createElement("div",{className:"messages-list-top"}),o.a.createElement("div",{ref:this.itemsRef,className:"messages-list-items"},this.messages)))}},{key:"showMessageDate",value:function(e,t,a){if(a)return!0;var n=[e.getAckts(),e.getJetts()],o=n[0],r=n[1],s=o?new Date(o/1e6):new Date(r),i=t?new Date(t.getAckts()?t.getAckts()/1e6:t.getJetts()):s;return(s.getFullYear()!==i.getFullYear()||s.getMonth()!==i.getMonth()||s.getDate()!==i.getDate())&&(console.log("message:",e,"prevMessage",t),!0)}},{key:"readMessages",value:function(){var e=this.props.chatId;j.b.getMessages(e).forEach((function(t){t.state===j.a.STATE_RECEIPT&&y.a.readMessage(e,t.msg)}))}}]),t}(o.a.Component),_e=a(130),$e=a.n(_e),et=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleButtonClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleChatInfo=function(){a.handleMenuClose(),setTimeout((function(){return a.props.openChatDetails()}),150)},a.handleMenuClose=function(){a.setState({anchorEl:null})},a.handleLogOut=function(){a.handleMenuClose(),a.props.onLogOut()},a.state={anchorEl:null},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.anchorEl;return n.createElement(n.Fragment,null,n.createElement(Ce.a,{"aria-owns":e?"simple-menu":null,"aria-haspopup":"true",className:"main-menu-button","aria-label":"Menu",onClick:this.handleButtonClick},n.createElement($e.a,null)),n.createElement(Oe.a,{id:"main-menu",anchorEl:e,open:Boolean(e),onClose:this.handleMenuClose,getContentAnchorEl:null,disableAutoFocusItem:!0,disableRestoreFocus:!0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},n.createElement(ve.a,{onClick:this.handleChatInfo},"ChatInfo")))}}]),t}(n.Component),tt=Object(ke.a)(Object(T.a)())(et),at=function(e){function t(e){return Object(u.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.chatId,o=e.onClick;return n.createElement("div",{className:h()("header-chat",t),onClick:o},n.createElement("div",{className:"header-chat-content"},n.createElement(pe,{chatId:a})))}}]),t}(n.Component),nt=(a(227),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).openChatDetails=function(){var e=v.a.getChatId();m.a.get(e)&&v.a.changeChatDetailsVisibility(!0)},a.state={connectionState:v.a.getConnectionState(),openDeleteDialog:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return t!==this.state}},{key:"render",value:function(){var e=v.a.getChatId();m.a.get(e);return o.a.createElement("div",{className:"header"},o.a.createElement(at,{className:h()("grow","cursor-pointer"),chatId:e,onClick:this.openChatDetails}),o.a.createElement(tt,{openChatDetails:this.openChatDetails}))}}]),t}(o.a.Component)),ot=(a(228),Object(ze.a)(o.a.createElement("path",{d:"M2.65383364,2.92607697 L4.145798,9.778632 C4.26700994,10.3353554 4.73555061,10.7489799 5.30300879,10.8002098 L16.196355,11.7836569 C16.3159306,11.7944521 16.4041145,11.9001385 16.3933192,12.0197141 C16.3838746,12.1243302 16.3009783,12.2072294 16.1963626,12.2166777 L5.30295988,13.2005138 C4.73552551,13.2517615 4.26701089,13.6653731 4.14579755,14.2220735 L2.65385781,21.074154 C2.55168485,21.543407 2.84926209,22.0066394 3.31851517,22.1088123 C3.50628037,22.1496954 3.70229947,22.1272304 3.87594675,22.0449272 L23.4110848,12.7858981 C23.8450551,12.5802101 24.0301144,12.0616646 23.8244264,11.6276943 C23.7384721,11.4463438 23.5924353,11.300307 23.4110848,11.2143527 L3.87592461,1.95531307 C3.44195432,1.74962507 2.92340882,1.93468443 2.71772082,2.36865471 C2.63541897,2.54229904 2.61295329,2.73831451 2.65383364,2.92607697 Z"}),"Send")),rt=(a(229),Object(ze.a)(o.a.createElement("path",{d:"M11.657825,8.68730116 L7.89384699,12.5266719 C6.53977525,13.9078658 6.53979565,16.118605 7.89389288,17.4997739 C9.18119565,18.812813 11.2598788,18.8798255 12.6276396,17.6859428 L12.8071445,17.5177786 L19.3928802,10.8005213 C21.4766204,8.67512215 21.4766204,5.27313659 19.3928802,3.14773741 C17.4051081,1.12022499 14.1862843,1.0310006 12.0906645,2.90336495 L11.834659,3.14773741 L5.26671543,9.84699003 C2.45333216,12.7166196 2.45333216,17.3098454 5.26671543,20.179475 C7.96150749,22.9281424 12.3352577,23.0332941 15.1578204,20.4629606 L15.452067,20.1794113 L19.2160679,16.340063 C19.6027032,15.945688 19.596429,15.3125541 19.202054,14.9259188 C18.8076791,14.5392835 18.1745452,14.5455577 17.7879099,14.9399327 L13.9520378,18.8511531 C11.9281881,20.8353343 8.67903707,20.8031766 6.6948559,18.7793268 C4.64395201,16.6874204 4.64395201,13.3390446 6.6948559,11.2471382 L13.3088798,4.50180526 C14.6072848,3.22884976 16.6917843,3.24948061 17.9647398,4.54788555 C19.2860006,5.89556155 19.2860006,8.05269718 17.9647398,9.40037319 L11.3764629,16.119959 C10.803533,16.6816592 9.88373353,16.6725557 9.32203335,16.0996258 C8.73040544,15.4961698 8.73039653,14.5302606 9.3220133,13.9267937 L13.0859914,10.0874229 C13.4726243,9.6930457 13.4663463,9.05991185 13.0719691,8.67327889 C12.6775919,8.28664594 12.044458,8.29292392 11.657825,8.68730116 Z"}),"Attach")),st=Object(ze.a)(o.a.createElement("path",{d:"M12.1715729,2 C12.9672223,2 13.7302841,2.31607052 14.2928932,2.87867966 L21.1213203,9.70710678 C21.6839295,10.2697159 22,11.0327777 22,11.8284271 L22,19 C22,20.6568542 20.6568542,22 19,22 L5,22 C3.34314575,22 2,20.6568542 2,19 L2,5 C2,3.34314575 3.34314575,2 5,2 L12.1715729,2 Z M11,4 L5,4 C4.44771525,4 4,4.44771525 4,5 L4,19 C4,19.5522847 4.44771525,20 5,20 L19,20 C19.5522847,20 20,19.5522847 20,19 L20,13 L14,13 C12.4023191,13 11.0963391,11.75108 11.0050927,10.1762728 L11,10 L11,4 Z M19.586,11 L13,4.414 L13,10 C13,10.5128358 13.3860402,10.9355072 13.8833789,10.9932723 L14,11 L19.586,11 Z"}),"Document"),it=a(271),ut=a(274),lt=Object(ze.a)(o.a.createElement("path",{d:"M19,2 C20.6568542,2 22,3.34314575 22,5 L22,19 C22,20.6568542 20.6568542,22 19,22 L5,22 C3.34314575,22 2,20.6568542 2,19 L2,5 C2,3.34314575 3.34314575,2 5,2 L19,2 Z M8.95903938,14.4653367 L8.89694708,14.4202095 C8.68789701,14.291568 8.42133316,14.3352159 8.26303498,14.5116789 L8.2090719,14.5840012 L4.88033327,19.9929138 L4.93969424,19.9982115 L4.93969424,19.9982115 L12.446,20 L9.05890452,14.5810435 C9.0316623,14.5374559 8.99794603,14.4984621 8.95903938,14.4653367 L8.89694708,14.4202095 L8.95903938,14.4653367 Z M15.6580762,12.1926572 C15.4476303,12.0663122 15.1815603,12.1128758 15.0252035,12.2910614 L14.9720355,12.3639701 L12.551,16.396 L14.803,20 L19,20 C19.5410622,20 19.9817615,19.5702952 19.9994483,19.0335352 L15.8247114,12.3563345 C15.7828678,12.2893847 15.7257647,12.2332952 15.6580762,12.1926572 Z M19,4 L5,4 C4.44771525,4 4,4.44771525 4,5 L4,17.606 L6.50573804,13.5358344 C7.19919591,12.4089238 8.64230264,12.0252274 9.79631538,12.6320827 L9.94511393,12.7168756 C10.2187146,12.885239 10.4567799,13.1044297 10.6467737,13.3619985 L10.7549011,13.5210456 L11.361,14.492 L13.2573282,11.3345145 C13.9384069,10.2000794 15.3772263,9.80060652 16.5378139,10.3947912 L16.6875318,10.4779499 C16.9695672,10.6472749 17.2148477,10.8702509 17.409849,11.1335934 L17.5207081,11.2963367 L20,15.264 L20,5 C20,4.44771525 19.5522847,4 19,4 Z"}),"SharedMedia"),ct=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={anchorEl:null},a.handleMenuClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleMenuClose=function(){a.setState({anchorEl:null})},a.handleAttachPhoto=function(){a.handleMenuClose();var e=a.props.onAttachPhoto;e&&setTimeout((function(){return e()}),L.a)},a.handleAttachDocument=function(){a.handleMenuClose();var e=a.props.onAttachDocument;e&&setTimeout((function(){return e()}),L.a)},a.handleAttachPoll=function(){a.handleMenuClose();var e=a.props.onAttachPoll;e&&e()},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.classes,e.t),a=(e.chatId,this.state.anchorEl);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ce.a,{className:"inputbox-icon-button","aria-label":"Attach",open:Boolean(a),onClick:this.handleMenuClick},o.a.createElement(rt,null)),o.a.createElement(Oe.a,{id:"attach-menu",anchorEl:a,open:Boolean(a),getContentAnchorEl:null,disableAutoFocusItem:!0,disableRestoreFocus:!0,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},onClose:this.handleMenuClose},o.a.createElement(ve.a,{onClick:this.handleAttachPhoto},o.a.createElement(it.a,null,o.a.createElement(lt,null)),o.a.createElement(ut.a,{primary:t("AttachPhoto")})),o.a.createElement(ve.a,{onClick:this.handleAttachDocument},o.a.createElement(it.a,null,o.a.createElement(st,null)),o.a.createElement(ut.a,{primary:t("AttachDocument")}))))}}]),t}(o.a.Component),dt=Object(T.a)()(ct),pt=a(68),gt=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onClientUpdateChatId=function(e){a.state.chatId!==e.nextChatId&&a.setState({chatId:e.nextChatId})},a.handleKeyDown=function(e){var t=e.altKey,n=e.ctrlKey,o=e.keyCode,r=e.metaKey,s=e.repeat,i=e.shiftKey;switch(o){case 13:t||n||r||i||(s||a.handleSubmit(),e.preventDefault(),e.stopPropagation());break;case 27:t||n||r||i||(s||a.handleCancel(),e.preventDefault(),e.stopPropagation())}},a.handleSubmit=function(){var e=a.state,t=(e.chatId,e.editMessageId,a.newMessageRef.current);if(t){var n=t.innerHTML;t.innerText=null,a.handleInput(),n&&n.trim()&&(n=(n=(n=n.replace(/<div><br><\/div>/gi,"<br>")).replace(/<div>/gi,"<br>")).replace(/<\/div>/gi,""),a.sendMessage(n,!1,(function(e){})))}},a.handleAttachDocument=function(){a.attachDocumentRef&&a.attachDocumentRef.current.click()},a.handleAttachDocumentComplete=function(){var e=a.attachDocumentRef.current.files;0!==e.length&&(Array.from(e).forEach((function(e){a.handleSendDocument(e)})),a.attachDocumentRef.current.value="")},a.handleAttachPhoto=function(){a.attachPhotoRef&&a.attachPhotoRef.current.click()},a.handleAttachPhotoComplete=function(){var e=a.attachPhotoRef.current.files;0!==e.length&&(Array.from(e).forEach((function(e){Object(W.f)(e,(function(e){a.handleSendPhoto(e)}))})),a.attachPhotoRef.current.value="")},a.handleSendPhoto=function(e){if(e){var t={"@type":"inputMessagePhoto",photo:{"@type":"inputFileBlob",name:e.name,data:e},width:e.photoWidth,height:e.photoHeight},n=new pt.Image;n.setLocalpath(e.blob);var o=new pt.Msg;o.setConversationid(a.state.chatId),o.setCid(v.a.getCid()),o.setType(pt.MsgType.PICTURE),o.setJetts(Date.now()),o.setBlob(n.serializeBinary());var r=m.a.get(a.state.chatId);r?y.a.sendImage(o,t.photo.data,e.name,r.conv):console.error("sendMessage failed!")}},a.handlePaste=function(e){for(var t=(e.clipboardData||e.originalEvent.clipboardData).items,n=[],o=0;o<t.length;o++)0===t[o].kind.indexOf("file")&&n.push(t[o].getAsFile());if(n.length>0)return e.preventDefault(),void a.setState({files:n});var r=e.clipboardData.getData("text/plain");return r?(e.preventDefault(),void document.execCommand("insertText",!1,r)):void 0},a.handleSendDocument=function(e){if(e){console.log("handleSendDocument",e);var t={"@type":"inputMessageDocument",document:{"@type":"inputFileBlob",name:e.name,data:e}},n=new pt.FileBean;n.setSize(e.size),n.setName(e.name);var o=new pt.Msg;o.setConversationid(a.state.chatId),o.setCid(v.a.getCid()),o.setType(pt.MsgType.FILE),o.setJetts(Date.now()),o.setBlob(n.serializeBinary());var r=m.a.get(a.state.chatId);r?y.a.sendFile(o,t.document.data,e.name,r.conv):console.error("sendMessage failed!")}},a.sendMessage=function(){var e=Object(I.a)(f.a.mark((function e(t,n,o){var r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new pt.Msg,console.log("IMController sendMsg",t),r.setConversationid(a.state.chatId),r.setCid(v.a.getCid()),r.setType(pt.MsgType.TEXT),r.setJetts(Date.now()),r.setBlob(new TextEncoder("utf-8").encode(t)),s=m.a.get(a.state.chatId)){e.next=11;break}return console.error("sendMessage failed!"),e.abrupt("return");case 11:y.a.sendMsg(r,s.conv);case 12:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),a.attachDocumentRef=o.a.createRef(),a.attachPhotoRef=o.a.createRef(),a.imageRef=o.a.createRef(),a.newMessageRef=o.a.createRef();var n=v.a.getChatId();return a.state={chatId:n},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){v.a.on("clientUpdateChatId",this.onClientUpdateChatId)}},{key:"componentWillUnmount",value:function(){v.a.off("clientUpdateChatId",this.onClientUpdateChatId)}},{key:"render",value:function(){var e=this.state.chatId;return o.a.createElement("div",{className:"inputbox-background"},o.a.createElement("div",{className:"inputbox"},o.a.createElement("div",{className:"inputbox-bubble"},o.a.createElement("div",{className:"inputbox-wrapper"},o.a.createElement("div",{className:"inputbox-left-column"}),o.a.createElement("div",{className:"inputbox-middle-column"},o.a.createElement("div",{id:"inputbox-message",ref:this.newMessageRef,contentEditable:!0,suppressContentEditableWarning:!0,onKeyDown:this.handleKeyDown,onPaste:this.handlePaste,onInput:this.handleInput})),o.a.createElement("div",{className:"inputbox-right-column"},o.a.createElement("input",{ref:this.attachDocumentRef,className:"inputbox-attach-button",type:"file",multiple:"multiple",onChange:this.handleAttachDocumentComplete}),o.a.createElement("input",{ref:this.attachPhotoRef,className:"inputbox-attach-button",type:"file",multiple:"multiple",accept:"image/*",onChange:this.handleAttachPhotoComplete}),o.a.createElement(dt,{chatId:e,onAttachPhoto:this.handleAttachPhoto,onAttachDocument:this.handleAttachDocument,onAttachPoll:this.handleAttachPoll})))),o.a.createElement("div",{className:"inputbox-send-button-background"},o.a.createElement(Ce.a,{className:"inputbox-send-button","aria-label":"Send",size:"small",onClick:this.handleSubmit},o.a.createElement(ot,null)))))}},{key:"handleInput",value:function(){}}]),t}(o.a.Component),ht=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onUpdateChatDetailsVisibility=function(e){a.forceUpdate()},a.onClientUpdateChatId=function(e){a.setState({chatId:e.nextChatId,messageId:e.nextMessageId})},a.scrollToBottom=function(){a.messagesList.scrollToBottom()},a.scrollToStart=function(){a.messagesList.scrollToStart()},a.scrollToMessage=function(){a.messagesList.scrollToMessage()},a.state={chatId:v.a.getChatId(),messageId:v.a.getMessageId(),selectedCount:0},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=this.state,n=a.chatId,o=a.messageId,r=a.selectedCount;return t.chatId!==n||(t.messageId!==o||t.selectedCount!==r)}},{key:"componentDidMount",value:function(){v.a.on("clientUpdateChatId",this.onClientUpdateChatId),v.a.on("clientUpdateChatDetailsVisibility",this.onUpdateChatDetailsVisibility)}},{key:"componentWillUnmount",value:function(){v.a.off("clientUpdateChatId",this.onClientUpdateChatId),v.a.on("clientUpdateChatDetailsVisibility",this.onUpdateChatDetailsVisibility)}},{key:"loadCache",value:function(){var e=Object(I.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te.a.loadMessages(this.state.chatId);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:e.t0,y.a.clientUpdate({"@type":"clientUpdateMessagesLoaded"});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;this.loadCache();var t=this.state,a=t.chatId,n=t.messageId,r=(t.selectedCount,v.a.isChatDetailsVisible);return o.a.createElement("div",{className:h()("dialog-details",{"dialog-details-third-column":r})},o.a.createElement(nt,{chatId:a}),o.a.createElement(Xe,{ref:function(t){return e.messagesList=t},chatId:a,messageId:n}),o.a.createElement(gt,null))}}]),t}(o.a.Component),Mt=(a(230),a(79)),ft=a.n(Mt),It=(a(231),function(e){function t(e){return Object(u.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.chatId,n=e.onClick,r=e.onClose,s=m.a.get(a),i=s.type,u=(s.conv,s.id,0===i?"Info":"Group Info");return o.a.createElement("div",{className:"header-master"},o.a.createElement("div",{className:"header-status grow cursor-pointer",onClick:n},o.a.createElement("span",{className:"header-status-content"},u)),o.a.createElement(Ce.a,{className:t.rightIconButton,onClick:r},o.a.createElement(ft.a,null)))}}]),t}(o.a.Component)),mt=Object(ke.a)(Object(T.a)(),$()({leftIconButton:{margin:"8px -2px 8px 12px"},rightIconButton:{margin:"8px 12px 8px -2px"}},{withTheme:!0}))(It),vt=a(272),yt=a(248),bt=(a(232),a(251)),Nt=(a(233),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).handleClick=function(){var e=a.props,t=e.userId,n=e.onSelect;n&&n(t)},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.userId!==this.props.userId}},{key:"render",value:function(){var e=this.props.userId,t=A(e),a=t&&t.nick?t.nick:"UserName";return o.a.createElement("div",{className:"user",onClick:this.handleClick},o.a.createElement("div",{className:"user-wrapper"},o.a.createElement(We,{userId:e}),o.a.createElement("div",{className:"dialog-inner-wrapper"},o.a.createElement("div",{className:"tile-first-row"},o.a.createElement("div",{className:"dialog-title"},a)),o.a.createElement("div",{className:"tile-second-row"}))))}}]),t}(o.a.Component)),Ct=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleOpenUser=function(e){!function(e){if(e!==v.a.getCid()){var t=m.a.findUserChat(e);t&&b(t)}}(e)},a.chatDetailsListRef=n.createRef();var o=a.props.chatId;return a.state={prevChatId:o},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.chatId,o=t.onClose,r=t.className,s=m.a.get(a);if(!s)return n.createElement("div",{className:"chat-details"},n.createElement(mt,{onClose:o}),n.createElement("div",{ref:this.chatDetailsListRef,className:"chat-details-list"}));var i=function(e){var t=m.a.get(e);return!!t&&(!!t.type&&1===t.type)}(a),u=ie(a);console.log("ChatDetails chat: ",s);var l=s.extra,c=u?null:s.conv.getMembersList().map((function(t){return n.createElement(bt.a,{button:!0,key:t},n.createElement(Nt,{userId:t,onSelect:e.handleOpenUser}))})),d=n.createElement(n.Fragment,null,n.createElement(mt,{chatId:a,backButton:!1,onClose:o,onClick:this.handleHeaderClick}),n.createElement("div",{ref:this.chatDetailsListRef,className:"chat-details-list"},n.createElement("div",{className:"chat-details-info"},n.createElement("div",{className:h()("chat",{"chat-big":!0}),onClick:this.handleClick},n.createElement("div",{className:"chat-wrapper"},n.createElement(F,{big:!0,chatId:a,extra:l}),n.createElement("div",{className:"dialog-inner-wrapper"},n.createElement("div",{className:"tile-first-row"},n.createElement(pe,{chatId:a,extra:l})),u&&n.createElement("div",{className:"tile-second-row"}))))),(!u||i)&&n.createElement(n.Fragment,null,n.createElement(vt.a,null),n.createElement(yt.a,null,c))));return n.createElement("div",{className:h()("chat-details",r)},d)}}]),t}(n.Component),Et=Object(ke.a)(Object(T.a)(),$()((function(e){return{closeIconButton:{margin:"8px -2px 8px 12px"},nested:{},listItem:{padding:"11px 22px"}}}),{withTheme:!0}))(Ct),Bt=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onClientUpdateChatId=function(e){var t=a.props.popup,n=a.state.chatId;t||n!==e.nextChatId&&a.setState({chatId:e.nextChatId})},a.onGroupInfo=function(e){var t=e.conv,n=a.state.chatId;(t||t.getId()===n)&&a.forceUpdate()},a.handleCloseChatDetails=function(){a.props.popup;a.state.userChatId?a.setState({userChatId:null}):v.a.changeChatDetailsVisibility(!1)},a.detailsRef=o.a.createRef();var n=e.popup,r=v.a.chatId,s=v.a.dialogChatId;return a.state={chatId:n?s:r},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadContent(this.state.chatId),v.a.on("clientUpdateChatId",this.onClientUpdateChatId),m.a.on("groupInfo",this.onGroupInfo)}},{key:"componentWillUnmount",value:function(){v.a.off("clientUpdateChatId",this.onClientUpdateChatId),m.a.off("groupInfo",this.onGroupInfo)}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.state.chatId;n!==t.chatId&&this.loadContent(n)}},{key:"loadContent",value:function(e){}},{key:"render",value:function(){var e=this.props,t=(e.classes,e.className),a=e.popup,n=this.state.chatId,r=m.a.get(n),s=(r.type,r.conv,r.id,ue(n),o.a.createElement(Et,{chatId:n,popup:a,onClose:this.handleCloseChatDetails}));return o.a.createElement("div",{className:h()("chat-info",{"right-column":!a},t)},s)}}]),t}(o.a.Component);Bt.defaultProps={className:null,classes:null,popup:!1};var Ot=Object(ke.a)($()({leftIconButton:{margin:"8px -2px 8px 12px"},rightIconButton:{margin:"8px 12px 8px -2px"}},{withTheme:!0}))(Bt),kt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onClientUpdateChatDetailsVisibility=function(e){a.setState({isChatDetailsVisible:v.a.isChatDetailsVisible})},a.onClientUpdateOpenChat=function(e){var t=e.chatId,n=e.messageId,o=e.popup;a.handleSelectChat(t,n,o)},a.handleSelectChat=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],v.a.getChatId()),o=(v.a.dialogChatId,v.a.getMessageId());n===e&&t&&o===t?a.dialogDetailsRef.current.scrollToMessage():n!==e||t?(a.dialogDetailsRef.current.scrollToBottom(),y.a.setChatId(e,t)):a.dialogDetailsRef.current.scrollToStart()},a.dialogDetailsRef=o.a.createRef(),a.state={isChatDetailsVisible:v.a.isChatDetailsVisible},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){m.a.on("clientUpdateOpenChat",this.onClientUpdateOpenChat),v.a.on("clientUpdateChatDetailsVisibility",this.onClientUpdateChatDetailsVisibility)}},{key:"componentWillUnmount",value:function(){m.a.off("clientUpdateOpenChat",this.onClientUpdateOpenChat),v.a.off("clientUpdateChatDetailsVisibility",this.onClientUpdateChatDetailsVisibility)}},{key:"render",value:function(){var e=this.state.isChatDetailsVisible;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:h()("page",{"page-third-column":e})},o.a.createElement(Re,null),o.a.createElement(ht,{ref:this.dialogDetailsRef}),e&&o.a.createElement(Ot,null)))}}]),t}(o.a.Component),St=a(49),At=a.n(St),wt=a(273),Ft=a(131),Tt=a.n(Ft),Rt=(a(234),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={data:null},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"scanQrCode",value:function(){At.a.post(L.d).then((function(e){console.log(e),window.location.href=e.data.data.auth_url})).catch((function(e){return console.log(e),null}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"authorization-form"},o.a.createElement("div",{className:"authorization-form-content"},o.a.createElement("div",{className:"auth-caption"},o.a.createElement("div",{className:"auth-caption-logo"},o.a.createElement("img",{src:Tt.a}))),o.a.createElement(wt.a,{classes:{root:"auth-button"},variant:"contained",disableElevation:!0,fullWidth:!0,color:"primary",onClick:this.scanQrCode},"\u626b\u7801\u767b\u5f55")))}}]),t}(o.a.Component)),Ut=new(function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).reset=function(){e.appInactive=!1,e.newMessages=new Map,e.settings=new Map,e.windowFocused=!0,e.timerHandler=null},e.onClientUpdate=function(t){switch(t["@type"]){case"clientUnreadMessage":e.appInactive=!0,e.newMessages=new Map,e.updateTimer();break;case"clientUpdateFocusWindow":var a=t.focused;console.log("[ns] clientUpdateFocusWindow",t),e.windowFocused=a,a&&(e.newMessages=new Map,e.updateTimer())}},e.onUpdate=function(e){},e.onTimer=function(){console.log("[ns] onTimer");var t=e.getUnreadCount();if(document.title===L.b&&t>0){var a="+99 notifications";1===t?a="1 notification":t<99&&(a="".concat(t," notifications")),document.title=a,document.getElementById("favicon").href="favicon_unread.ico"}else document.title=L.b+(e.appInactive?": Zzz\u2026":""),document.getElementById("favicon").href="favicon.ico"},e.reset(),e.addIMListener(),e.setMaxListeners(1/0),e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"addIMListener",value:function(){y.a.addListener("update",this.onUpdate),y.a.addListener("clientUpdate",this.onClientUpdate)}},{key:"getUnreadCount",value:function(){return j.b.getUnread()}},{key:"updateTimer",value:function(){var e=this.getUnreadCount();console.log("[ns] updateTimer",e,this.newMessages),e>0?this.timerHandler||(this.onTimer(),this.timerHandler=setInterval(this.onTimer,1e3)):this.timerHandler&&(clearInterval(this.timerHandler),this.timerHandler=null,this.onTimer())}}]),t}(a(27).EventEmitter));window.notifications=Ut;var Dt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onUpdateAuthorizationState=function(e){window.hasFocus&&(console.log("onUpdateAuthorizationState"),v.a.getCid()&&y.a.init(v.a.getCid()))},a.onUpdate=function(e){console.log("update: "+e["@type"])},a.onLogout=function(e){a.state={prevAuthorizationState:null,authorizationState:null},console.log("onLogout",S.b.current),a.forceUpdate()},a.state={inactive:!1,prevAuthorizationState:S.b.current,authorizationState:null},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){y.a.addListener("update",this.onUpdate),v.a.on("clientUpdateAuthState",this.onUpdateAuthorizationState),S.b.on("clientLogout",this.onLogout)}},{key:"componentWillUnmount",value:function(){y.a.off("update",this.onUpdate),v.a.off("clientUpdateAuthState",this.onUpdateAuthorizationState),S.b.off("clientLogout",this.onLogout)}},{key:"render",value:function(){var e=this.state,t=e.authorizationState,a=e.prevAuthorizationState;console.log(t,a),t||(t=S.b.current?a:{auth_state:S.a.STATE_IDLE});var n=o.a.createElement(kt,null);if(t)switch(t.auth_state){case S.a.STATE_IDLE:case S.a.STATE_FAILED:n=o.a.createElement(Rt,{authorizationState:t});break;case S.a.STATE_LOGIN:y.a.clientUpdate(Object(i.a)({"@type":"clientUpdateAuthState"},t)),y.a.init(t.uid)}return o.a.createElement("div",{id:"app"},n)}}]),t}(o.a.Component);window.hasFocus=!0,window.onblur=function(){console.log("onFocus false"),window.hasFocus=!1,y.a.clientUpdate({"@type":"clientUpdateFocusWindow",focused:!1})},window.onfocus=function(){console.log("onFocus true"),window.hasFocus=!0,y.a.clientUpdate({"@type":"clientUpdateFocusWindow",focused:!0})};var jt=Dt,Lt=a(133),Wt=a(55),xt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Pt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var zt=a(132),Gt=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=zt.parse(window.location.search);console.log("redirect to: ","".concat("/react-app")),At.a.post(L.c,"auth_id="+e.auth_id).then((function(e){var t=200===e.data.code?S.a.STATE_LOGIN:S.a.STATE_FAILED,a=Object(i.a)({auth_state:t},e.data.data);y.a.update({"@type":"updateAuthState",data:a}),window.location.href="/react-app/"})).catch((function(e){console.log(e);var t={auth_state:S.a.STATE_FAILED};y.a.update({"@type":"updateAuthState",data:t})}))}},{key:"render",value:function(){return n.createElement("div",null,n.createElement("span",null,"Redirecting..."))}}]),t}(n.Component);s.a.render(o.a.createElement(Lt.a,{basename:"/react-app"},o.a.createElement(Wt.c,null,o.a.createElement(Wt.a,{exact:!0,path:"/",component:jt}),o.a.createElement(Wt.a,{path:"/login/redirect/",component:Gt}))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/react-app",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/react-app","/service-worker.js");xt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Pt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Pt(t,e)}))}}()},26:function(e,t,a){"use strict";var n=a(9),o=a.n(n),r=a(65),s=a(15),i=a(3),u=a(2),l=a(4),c=a(5),d=a(6),p=a(11),g=a(38),h=a(29),M=a(24),f=a(68),I=a(92),m=new(function(){function e(){var t=this;Object(i.a)(this,e),this.onWorkerMessage=function(e){var a=e.data;if(a){var n=a.handlerKey,o=a.cache,r=t.handlers.get(n);if(r){var s=r.command,i=r.resolve;r.reject;switch(s){case"save":i();break;case"load":i(o)}}}},this.handlers=new Map,this.messageM=new Map,this.loadedMsgConv=new Set,this.userStore=new M.a("user"),this.chatStore=new M.a("chat"),this.fileStore=new M.a("file")}return Object(u.a)(e,[{key:"load",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.a.localStorage){e.next=8;break}if(a=localStorage.getItem(t)){e.next=4;break}return e.abrupt("return",null);case 4:return n=JSON.parse(a),e.abrupt("return",n);case 8:return e.next=10,Object(M.d)(t);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadChats",value:function(){var e=Object(s.a)(o.a.mark((function e(){var t,a,n,r,s,i,u,l,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Map,e.next=3,Object(M.e)(this.chatStore);case 3:a=e.sent,n=!0,r=!1,s=void 0,e.prev=7,i=a[Symbol.iterator]();case 9:if(n=(u=i.next()).done){e.next=19;break}return l=u.value,e.next=13,Object(M.d)(l,this.chatStore);case 13:(c=e.sent)&&c.conv&&(c=Object(h.a)({},c,{conv:I.Conversation.deserializeBinary(c.conv)})).last_msg&&(c=Object(h.a)({},c,{last_msg:f.Msg.deserializeBinary(c.last_msg)})),t.set(l,c);case 16:n=!0,e.next=9;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(7),r=!0,s=e.t0;case 25:e.prev=25,e.prev=26,n||null==i.return||i.return();case 28:if(e.prev=28,!r){e.next=31;break}throw s;case 31:return e.finish(28);case 32:return e.finish(25);case 33:return e.abrupt("return",t);case 34:case"end":return e.stop()}}),e,this,[[7,21,25,33],[26,,28,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadFiles",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.loadStore(this.fileStore));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadUsers",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.loadStore(this.userStore));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadStore",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var a,n,r,s,i,u,l,c,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Map,e.next=3,Object(M.e)(t);case 3:n=e.sent,r=!0,s=!1,i=void 0,e.prev=7,u=n[Symbol.iterator]();case 9:if(r=(l=u.next()).done){e.next=18;break}return c=l.value,e.next=13,Object(M.d)(c,t);case 13:d=e.sent,a.set(c,d);case 15:r=!0,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),s=!0,i=e.t0;case 24:e.prev=24,e.prev=25,r||null==u.return||u.return();case 27:if(e.prev=27,!s){e.next=30;break}throw i;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return e.abrupt("return",a);case 33:case"end":return e.stop()}}),e,null,[[7,20,24,32],[25,,27,31]])})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(s.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.a.localStorage){e.next=4;break}localStorage.setItem(t,JSON.stringify(a)),e.next=6;break;case 4:return e.next=6,Object(M.f)(t,a);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"saveUser",value:function(){var e=Object(s.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(M.f)(t,a,this.userStore);case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"saveChat",value:function(){var e=Object(s.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=Object(h.a)({},a,{conv:a.conv.serializeBinary()})).last_msg&&(a=Object(h.a)({},a,{last_msg:a.last_msg.serializeBinary()})),Object(M.f)(t,a,this.chatStore);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"removeChat",value:function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(M.c)(t,this.chatStore);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveMessage",value:function(){var e=Object(s.a)(o.a.mark((function e(t,a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.messageM.get(t))||(r=new M.a("conv_"+t),this.messageM.set(t,r)),n=Object(h.a)({},n,{msg:n.msg.serializeBinary()}),Object(M.f)(a,n,r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"loadMessages",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var a,n,r,s,i,u,l,c,d,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("CacheStore loadMessages ids: ",t),(a=this.messageM.get(t))||(a=new M.a("conv_"+t),this.messageM.set(t,a)),n=new Map,e.next=6,Object(M.e)(a);case 6:r=e.sent,s=!0,i=!1,u=void 0,e.prev=10,l=r[Symbol.iterator]();case 12:if(s=(c=l.next()).done){e.next=22;break}return d=c.value,e.next=16,Object(M.d)(d,a);case 16:(p=e.sent)&&p.msg&&(p=Object(h.a)({},p,{msg:f.Msg.deserializeBinary(p.msg)})),n.set(d,p);case 19:s=!0,e.next=12;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(10),i=!0,u=e.t0;case 28:e.prev=28,e.prev=29,s||null==l.return||l.return();case 31:if(e.prev=31,!i){e.next=34;break}throw u;case 34:return e.finish(31);case 35:return e.finish(28);case 36:return this.loadedMsgConv.add(t),e.abrupt("return",n);case 38:case"end":return e.stop()}}),e,this,[[10,24,28,36],[29,,31,35]])})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.c)(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.b)(this.userStore);case 2:return e.next=4,Object(M.b)(this.chatStore);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),v=a(27),y=a(10),b=a(35),N=a(22),C=a(7),E=new(function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(c.a)(t).call(this))).reset=function(){e.chatIds=[]},e.onUpdate=function(t){switch(t["@type"]){case"updateAuthorizationState":var a=t.authorization_state;if(!a)break;switch(a["@type"]){case"authorizationStateClosed":e.reset();break;case"authorizationStateLoggingOut":case"authorizationStateWaitCode":case"authorizationStateWaitPhoneNumber":case"authorizationStateWaitPassword":case"authorizationStateWaitRegistration":m.remove("cache"),m.remove("files")}}},e.onClientUpdate=function(t){switch(t["@type"]){case"clientLogout":e.reset(),e.clear()}},e.reset(),e.addIMListener(),e.setMaxListeners(1/0),e.saveChatsInternal=Object(g.a)(e.saveChatsInternal,2e3),e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"addIMListener",value:function(){p.a.addListener("update",this.onUpdate),p.a.addListener("clientUpdate",this.onClientUpdate)}},{key:"loadCache",value:function(){var e=Object(s.a)(o.a.mark((function e(){var t,a,n,s,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=[]).push(m.loadChats().catch((function(e){return null}))),t.push(m.loadUsers().catch((function(e){return null}))),t.push(m.loadFiles().catch((function(e){return null}))),e.next=6,Promise.all(t);case 6:return a=e.sent,n=Object(r.a)(a,3),s=n[0],i=n[1],u=n[2],(s||[]).forEach((function(e,t){C.a.newItems.has(e.id)&&C.a.set(e)})),(i||[]).forEach((function(e,t){b.a.set(e)})),(u||[]).forEach((function(e,t){N.a.setDataUrl(t,e)})),e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.clear();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getCache",value:function(e){new Map,new Map;return{chats:e.map((function(e){return C.a.get(e)}))}}},{key:"saveUser",value:function(){var e=Object(s.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.saveUser(t,a);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"saveChat",value:function(){var e=Object(s.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.saveChat(t,a);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"removeChat",value:function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.removeChat(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveChats",value:function(e){this.chatIds=e,this.saveChatsInternal()}},{key:"saveChatsInternal",value:function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getCache(this.chatIds),e.next=3,m.save("cache",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveMessage",value:function(e,t,a){this.saveMessageInternal(e,t,a)}},{key:"saveMessageInternal",value:function(){var e=Object(s.a)(o.a.mark((function e(t,a,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.saveMessage(t,a,n);case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"loadMessages",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.loadMessages(t);case 2:a=e.sent,console.log("CacheStore loadMessages",t,a),y.b.addMessages(t,a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"messageLoaded",value:function(e){return m.loadedMsgConv.has(e)}}]),t}(v.EventEmitter));window.cache=E;t.a=E},35:function(e,t,a){"use strict";var n=a(3),o=a(2),r=a(4),s=a(5),i=a(6),u=a(27),l=a(11),c=a(26),d=new(function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).reset=function(){e.items=new Map,e.fullInfoItems=new Map},e.onUpdate=function(t){switch(t["@type"]){case"updateUser":var a=t.user;e.set(a),c.a.saveUser(a.cid,a),e.emit(t["@type"],t)}},e.onClientUpdate=function(e){},e.reset(),e.addIMListener(),e.setMaxListeners(1/0),e}return Object(i.a)(t,e),Object(o.a)(t,[{key:"addIMListener",value:function(){l.a.addListener("update",this.onUpdate),l.a.addListener("clientUpdate",this.onClientUpdate)}},{key:"get",value:function(e){return this.items.get(e)}},{key:"set",value:function(e){this.items.set(e.cid,e)}}]),t}(u.EventEmitter));window.user=d,t.a=d},38:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return s})),a.d(t,"f",(function(){return i})),a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return l}));a(37),a(135),a(17);var n=a(19);function o(e,t){if(!e)return null;if(0===e.length)return null;if(0===t)return null;for(var a=e[0].width>=e[0].height,n=Math.abs(t-(a?e[0].width:e[0].height)),o=0,r=1;r<e.length;r++)if("i"!==e[r].type||e[r].photo.local.is_downloading_completed){var s=Math.abs(t-(a?e[r].width:e[r].height));s<n&&(o=r,s=n)}return e[o]}function r(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e?!a&&e.width<t&&e.height<t?e:e.width>e.height?{width:t,height:Math.floor(e.height*t/e.width)}:{width:Math.floor(e.width*t/e.height),height:t}:{width:0,height:0}}function s(e,t,a){var n;return function(){var o=this,r=arguments,s=function(){n=null,a||e.apply(o,r)},i=a&&!n;clearTimeout(n),n=setTimeout(s,t),i&&e.apply(o,r)}}function i(e,t){var a=new FileReader;a.addEventListener("load",(function(){var n=new Image;n.addEventListener("load",(function(){e.photoWidth=n.width,e.photoHeight=n.height,e.blob=a.result,t(e)})),n.src=a.result,console.log("image.src: ",a.result)})),a.readAsDataURL(e)}function u(e){return console.log("isAuthorizationReady",e),!!e&&e===n.a.STATE_LOGIN}function l(e,t){return!(!e&&t)&&(!(e&&!t)&&(!e&&!t||(0===e.length&&0===t.length||e===t)))}},64:function(e,t,a){"use strict";(function(e){a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i}));var n=a(22),o=(a(35),a(49),a(11));function r(e){var t=n.a.get(e);return null==t&&o.a.downloadFile(e),t}function s(e){if(!e)return"";var t=e.split(".");return 1===t.length||""===t[0]&&2===t.length?"":t.pop().toLowerCase()}function i(e){return e?e<1024?"".concat(e," B"):e<1048576?"".concat((e/1024).toFixed(1)," KB"):e<1073741824?"".concat((e/1024/1024).toFixed(1)," MB"):"".concat((e/1024/1024/1024).toFixed(1)," GB"):"0 B"}}).call(this,a(113).Buffer)},68:function(e,t,a){var n=a(75),o=n,r=Function("return this")(),s=a(175);o.object.extend(proto,s),o.exportSymbol("proto.IMNut.AuxiliaryMsg",null,r),o.exportSymbol("proto.IMNut.FileBean",null,r),o.exportSymbol("proto.IMNut.Image",null,r),o.exportSymbol("proto.IMNut.Msg",null,r),o.exportSymbol("proto.IMNut.MsgAck",null,r),o.exportSymbol("proto.IMNut.MsgList",null,r),o.exportSymbol("proto.IMNut.MsgRead",null,r),o.exportSymbol("proto.IMNut.MsgType",null,r),proto.IMNut.Msg=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.Msg,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.Msg.displayName="proto.IMNut.Msg"),proto.IMNut.MsgAck=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.MsgAck,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.MsgAck.displayName="proto.IMNut.MsgAck"),proto.IMNut.MsgRead=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.MsgRead,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.MsgRead.displayName="proto.IMNut.MsgRead"),proto.IMNut.MsgList=function(e){n.Message.initialize(this,e,0,-1,proto.IMNut.MsgList.repeatedFields_,null)},o.inherits(proto.IMNut.MsgList,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.MsgList.displayName="proto.IMNut.MsgList"),proto.IMNut.Image=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.Image,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.Image.displayName="proto.IMNut.Image"),proto.IMNut.AuxiliaryMsg=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.AuxiliaryMsg,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.AuxiliaryMsg.displayName="proto.IMNut.AuxiliaryMsg"),proto.IMNut.FileBean=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.FileBean,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.FileBean.displayName="proto.IMNut.FileBean"),n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.Msg.prototype.toObject=function(e){return proto.IMNut.Msg.toObject(e,this)},proto.IMNut.Msg.toObject=function(e,t){var a={conversationid:n.Message.getFieldWithDefault(t,1,""),cid:n.Message.getFieldWithDefault(t,2,""),type:n.Message.getFieldWithDefault(t,5,0),blob:t.getBlob_asB64(),blobextra:t.getBlobextra_asB64(),jetts:n.Message.getFieldWithDefault(t,10,0),ackts:n.Message.getFieldWithDefault(t,11,0),id:n.Message.getFieldWithDefault(t,12,0)};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.Msg.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.Msg;return proto.IMNut.Msg.deserializeBinaryFromReader(a,t)},proto.IMNut.Msg.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setConversationid(a);break;case 2:a=t.readString();e.setCid(a);break;case 5:a=t.readEnum();e.setType(a);break;case 6:a=t.readBytes();e.setBlob(a);break;case 7:a=t.readBytes();e.setBlobextra(a);break;case 10:a=t.readInt64();e.setJetts(a);break;case 11:a=t.readInt64();e.setAckts(a);break;case 12:a=t.readInt64();e.setId(a);break;default:t.skipField()}}return e},proto.IMNut.Msg.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.Msg.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.Msg.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getConversationid()).length>0&&t.writeString(1,a),(a=e.getCid()).length>0&&t.writeString(2,a),0!==(a=e.getType())&&t.writeEnum(5,a),(a=e.getBlob_asU8()).length>0&&t.writeBytes(6,a),(a=e.getBlobextra_asU8()).length>0&&t.writeBytes(7,a),0!==(a=e.getJetts())&&t.writeInt64(10,a),0!==(a=e.getAckts())&&t.writeInt64(11,a),0!==(a=e.getId())&&t.writeInt64(12,a)},proto.IMNut.Msg.prototype.getConversationid=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.Msg.prototype.setConversationid=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.Msg.prototype.getCid=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.Msg.prototype.setCid=function(e){n.Message.setProto3StringField(this,2,e)},proto.IMNut.Msg.prototype.getType=function(){return n.Message.getFieldWithDefault(this,5,0)},proto.IMNut.Msg.prototype.setType=function(e){n.Message.setProto3EnumField(this,5,e)},proto.IMNut.Msg.prototype.getBlob=function(){return n.Message.getFieldWithDefault(this,6,"")},proto.IMNut.Msg.prototype.getBlob_asB64=function(){return n.Message.bytesAsB64(this.getBlob())},proto.IMNut.Msg.prototype.getBlob_asU8=function(){return n.Message.bytesAsU8(this.getBlob())},proto.IMNut.Msg.prototype.setBlob=function(e){n.Message.setProto3BytesField(this,6,e)},proto.IMNut.Msg.prototype.getBlobextra=function(){return n.Message.getFieldWithDefault(this,7,"")},proto.IMNut.Msg.prototype.getBlobextra_asB64=function(){return n.Message.bytesAsB64(this.getBlobextra())},proto.IMNut.Msg.prototype.getBlobextra_asU8=function(){return n.Message.bytesAsU8(this.getBlobextra())},proto.IMNut.Msg.prototype.setBlobextra=function(e){n.Message.setProto3BytesField(this,7,e)},proto.IMNut.Msg.prototype.getJetts=function(){return n.Message.getFieldWithDefault(this,10,0)},proto.IMNut.Msg.prototype.setJetts=function(e){n.Message.setProto3IntField(this,10,e)},proto.IMNut.Msg.prototype.getAckts=function(){return n.Message.getFieldWithDefault(this,11,0)},proto.IMNut.Msg.prototype.setAckts=function(e){n.Message.setProto3IntField(this,11,e)},proto.IMNut.Msg.prototype.getId=function(){return n.Message.getFieldWithDefault(this,12,0)},proto.IMNut.Msg.prototype.setId=function(e){n.Message.setProto3IntField(this,12,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.MsgAck.prototype.toObject=function(e){return proto.IMNut.MsgAck.toObject(e,this)},proto.IMNut.MsgAck.toObject=function(e,t){var a={conversationid:n.Message.getFieldWithDefault(t,1,""),id:n.Message.getFieldWithDefault(t,2,0),jetts:n.Message.getFieldWithDefault(t,10,0),ackts:n.Message.getFieldWithDefault(t,11,0)};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.MsgAck.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.MsgAck;return proto.IMNut.MsgAck.deserializeBinaryFromReader(a,t)},proto.IMNut.MsgAck.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setConversationid(a);break;case 2:a=t.readInt64();e.setId(a);break;case 10:a=t.readInt64();e.setJetts(a);break;case 11:a=t.readInt64();e.setAckts(a);break;default:t.skipField()}}return e},proto.IMNut.MsgAck.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.MsgAck.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.MsgAck.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getConversationid()).length>0&&t.writeString(1,a),0!==(a=e.getId())&&t.writeInt64(2,a),0!==(a=e.getJetts())&&t.writeInt64(10,a),0!==(a=e.getAckts())&&t.writeInt64(11,a)},proto.IMNut.MsgAck.prototype.getConversationid=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.MsgAck.prototype.setConversationid=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.MsgAck.prototype.getId=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.IMNut.MsgAck.prototype.setId=function(e){n.Message.setProto3IntField(this,2,e)},proto.IMNut.MsgAck.prototype.getJetts=function(){return n.Message.getFieldWithDefault(this,10,0)},proto.IMNut.MsgAck.prototype.setJetts=function(e){n.Message.setProto3IntField(this,10,e)},proto.IMNut.MsgAck.prototype.getAckts=function(){return n.Message.getFieldWithDefault(this,11,0)},proto.IMNut.MsgAck.prototype.setAckts=function(e){n.Message.setProto3IntField(this,11,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.MsgRead.prototype.toObject=function(e){return proto.IMNut.MsgRead.toObject(e,this)},proto.IMNut.MsgRead.toObject=function(e,t){var a={conversationid:n.Message.getFieldWithDefault(t,1,""),id:n.Message.getFieldWithDefault(t,2,0),cid:n.Message.getFieldWithDefault(t,3,"")};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.MsgRead.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.MsgRead;return proto.IMNut.MsgRead.deserializeBinaryFromReader(a,t)},proto.IMNut.MsgRead.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setConversationid(a);break;case 2:a=t.readInt64();e.setId(a);break;case 3:a=t.readString();e.setCid(a);break;default:t.skipField()}}return e},proto.IMNut.MsgRead.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.MsgRead.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.MsgRead.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getConversationid()).length>0&&t.writeString(1,a),0!==(a=e.getId())&&t.writeInt64(2,a),(a=e.getCid()).length>0&&t.writeString(3,a)},proto.IMNut.MsgRead.prototype.getConversationid=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.MsgRead.prototype.setConversationid=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.MsgRead.prototype.getId=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.IMNut.MsgRead.prototype.setId=function(e){n.Message.setProto3IntField(this,2,e)},proto.IMNut.MsgRead.prototype.getCid=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.IMNut.MsgRead.prototype.setCid=function(e){n.Message.setProto3StringField(this,3,e)},proto.IMNut.MsgList.repeatedFields_=[6],n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.MsgList.prototype.toObject=function(e){return proto.IMNut.MsgList.toObject(e,this)},proto.IMNut.MsgList.toObject=function(e,t){var a={direct:n.Message.getFieldWithDefault(t,1,!1),finished:n.Message.getFieldWithDefault(t,2,!1),convid:n.Message.getFieldWithDefault(t,3,""),lastid:n.Message.getFieldWithDefault(t,4,0),limit:n.Message.getFieldWithDefault(t,5,0),msgsList:n.Message.toObjectList(t.getMsgsList(),proto.IMNut.Msg.toObject,e)};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.MsgList.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.MsgList;return proto.IMNut.MsgList.deserializeBinaryFromReader(a,t)},proto.IMNut.MsgList.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readBool();e.setDirect(a);break;case 2:a=t.readBool();e.setFinished(a);break;case 3:a=t.readString();e.setConvid(a);break;case 4:a=t.readInt64();e.setLastid(a);break;case 5:a=t.readInt32();e.setLimit(a);break;case 6:a=new proto.IMNut.Msg;t.readMessage(a,proto.IMNut.Msg.deserializeBinaryFromReader),e.addMsgs(a);break;default:t.skipField()}}return e},proto.IMNut.MsgList.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.MsgList.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.MsgList.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getDirect())&&t.writeBool(1,a),(a=e.getFinished())&&t.writeBool(2,a),(a=e.getConvid()).length>0&&t.writeString(3,a),0!==(a=e.getLastid())&&t.writeInt64(4,a),0!==(a=e.getLimit())&&t.writeInt32(5,a),(a=e.getMsgsList()).length>0&&t.writeRepeatedMessage(6,a,proto.IMNut.Msg.serializeBinaryToWriter)},proto.IMNut.MsgList.prototype.getDirect=function(){return n.Message.getFieldWithDefault(this,1,!1)},proto.IMNut.MsgList.prototype.setDirect=function(e){n.Message.setProto3BooleanField(this,1,e)},proto.IMNut.MsgList.prototype.getFinished=function(){return n.Message.getFieldWithDefault(this,2,!1)},proto.IMNut.MsgList.prototype.setFinished=function(e){n.Message.setProto3BooleanField(this,2,e)},proto.IMNut.MsgList.prototype.getConvid=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.IMNut.MsgList.prototype.setConvid=function(e){n.Message.setProto3StringField(this,3,e)},proto.IMNut.MsgList.prototype.getLastid=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.IMNut.MsgList.prototype.setLastid=function(e){n.Message.setProto3IntField(this,4,e)},proto.IMNut.MsgList.prototype.getLimit=function(){return n.Message.getFieldWithDefault(this,5,0)},proto.IMNut.MsgList.prototype.setLimit=function(e){n.Message.setProto3IntField(this,5,e)},proto.IMNut.MsgList.prototype.getMsgsList=function(){return n.Message.getRepeatedWrapperField(this,proto.IMNut.Msg,6)},proto.IMNut.MsgList.prototype.setMsgsList=function(e){n.Message.setRepeatedWrapperField(this,6,e)},proto.IMNut.MsgList.prototype.addMsgs=function(e,t){return n.Message.addToRepeatedWrapperField(this,6,e,proto.IMNut.Msg,t)},proto.IMNut.MsgList.prototype.clearMsgsList=function(){this.setMsgsList([])},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.Image.prototype.toObject=function(e){return proto.IMNut.Image.toObject(e,this)},proto.IMNut.Image.toObject=function(e,t){var a={localpath:n.Message.getFieldWithDefault(t,1,""),cachepath:n.Message.getFieldWithDefault(t,2,""),filename:n.Message.getFieldWithDefault(t,3,""),imgurl:n.Message.getFieldWithDefault(t,4,""),width:n.Message.getFieldWithDefault(t,5,""),height:n.Message.getFieldWithDefault(t,6,"")};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.Image.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.Image;return proto.IMNut.Image.deserializeBinaryFromReader(a,t)},proto.IMNut.Image.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setLocalpath(a);break;case 2:a=t.readString();e.setCachepath(a);break;case 3:a=t.readString();e.setFilename(a);break;case 4:a=t.readString();e.setImgurl(a);break;case 5:a=t.readString();e.setWidth(a);break;case 6:a=t.readString();e.setHeight(a);break;default:t.skipField()}}return e},proto.IMNut.Image.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.Image.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.Image.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getLocalpath()).length>0&&t.writeString(1,a),(a=e.getCachepath()).length>0&&t.writeString(2,a),(a=e.getFilename()).length>0&&t.writeString(3,a),(a=e.getImgurl()).length>0&&t.writeString(4,a),(a=e.getWidth()).length>0&&t.writeString(5,a),(a=e.getHeight()).length>0&&t.writeString(6,a)},proto.IMNut.Image.prototype.getLocalpath=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.Image.prototype.setLocalpath=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.Image.prototype.getCachepath=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.Image.prototype.setCachepath=function(e){n.Message.setProto3StringField(this,2,e)},proto.IMNut.Image.prototype.getFilename=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.IMNut.Image.prototype.setFilename=function(e){n.Message.setProto3StringField(this,3,e)},proto.IMNut.Image.prototype.getImgurl=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.IMNut.Image.prototype.setImgurl=function(e){n.Message.setProto3StringField(this,4,e)},proto.IMNut.Image.prototype.getWidth=function(){return n.Message.getFieldWithDefault(this,5,"")},proto.IMNut.Image.prototype.setWidth=function(e){n.Message.setProto3StringField(this,5,e)},proto.IMNut.Image.prototype.getHeight=function(){return n.Message.getFieldWithDefault(this,6,"")},proto.IMNut.Image.prototype.setHeight=function(e){n.Message.setProto3StringField(this,6,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.AuxiliaryMsg.prototype.toObject=function(e){return proto.IMNut.AuxiliaryMsg.toObject(e,this)},proto.IMNut.AuxiliaryMsg.toObject=function(e,t){var a={type:n.Message.getFieldWithDefault(t,1,0),blob:t.getBlob_asB64()};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.AuxiliaryMsg.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.AuxiliaryMsg;return proto.IMNut.AuxiliaryMsg.deserializeBinaryFromReader(a,t)},proto.IMNut.AuxiliaryMsg.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readEnum();e.setType(a);break;case 2:a=t.readBytes();e.setBlob(a);break;default:t.skipField()}}return e},proto.IMNut.AuxiliaryMsg.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.AuxiliaryMsg.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.AuxiliaryMsg.serializeBinaryToWriter=function(e,t){var a=void 0;0!==(a=e.getType())&&t.writeEnum(1,a),(a=e.getBlob_asU8()).length>0&&t.writeBytes(2,a)},proto.IMNut.AuxiliaryMsg.prototype.getType=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.IMNut.AuxiliaryMsg.prototype.setType=function(e){n.Message.setProto3EnumField(this,1,e)},proto.IMNut.AuxiliaryMsg.prototype.getBlob=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.AuxiliaryMsg.prototype.getBlob_asB64=function(){return n.Message.bytesAsB64(this.getBlob())},proto.IMNut.AuxiliaryMsg.prototype.getBlob_asU8=function(){return n.Message.bytesAsU8(this.getBlob())},proto.IMNut.AuxiliaryMsg.prototype.setBlob=function(e){n.Message.setProto3BytesField(this,2,e)},n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.FileBean.prototype.toObject=function(e){return proto.IMNut.FileBean.toObject(e,this)},proto.IMNut.FileBean.toObject=function(e,t){var a={localpath:n.Message.getFieldWithDefault(t,1,""),name:n.Message.getFieldWithDefault(t,2,""),url:n.Message.getFieldWithDefault(t,3,""),mediatype:n.Message.getFieldWithDefault(t,4,""),md5:n.Message.getFieldWithDefault(t,5,""),size:n.Message.getFieldWithDefault(t,6,0)};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.FileBean.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.FileBean;return proto.IMNut.FileBean.deserializeBinaryFromReader(a,t)},proto.IMNut.FileBean.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setLocalpath(a);break;case 2:a=t.readString();e.setName(a);break;case 3:a=t.readString();e.setUrl(a);break;case 4:a=t.readString();e.setMediatype(a);break;case 5:a=t.readString();e.setMd5(a);break;case 6:a=t.readInt64();e.setSize(a);break;default:t.skipField()}}return e},proto.IMNut.FileBean.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.FileBean.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.FileBean.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getLocalpath()).length>0&&t.writeString(1,a),(a=e.getName()).length>0&&t.writeString(2,a),(a=e.getUrl()).length>0&&t.writeString(3,a),(a=e.getMediatype()).length>0&&t.writeString(4,a),(a=e.getMd5()).length>0&&t.writeString(5,a),0!==(a=e.getSize())&&t.writeInt64(6,a)},proto.IMNut.FileBean.prototype.getLocalpath=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.FileBean.prototype.setLocalpath=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.FileBean.prototype.getName=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.FileBean.prototype.setName=function(e){n.Message.setProto3StringField(this,2,e)},proto.IMNut.FileBean.prototype.getUrl=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.IMNut.FileBean.prototype.setUrl=function(e){n.Message.setProto3StringField(this,3,e)},proto.IMNut.FileBean.prototype.getMediatype=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.IMNut.FileBean.prototype.setMediatype=function(e){n.Message.setProto3StringField(this,4,e)},proto.IMNut.FileBean.prototype.getMd5=function(){return n.Message.getFieldWithDefault(this,5,"")},proto.IMNut.FileBean.prototype.setMd5=function(e){n.Message.setProto3StringField(this,5,e)},proto.IMNut.FileBean.prototype.getSize=function(){return n.Message.getFieldWithDefault(this,6,0)},proto.IMNut.FileBean.prototype.setSize=function(e){n.Message.setProto3IntField(this,6,e)},proto.IMNut.MsgType={TEXT:0,PICTURE:1,VOICE:2,REDPACKET:3,AUXILIARY:4,FILE:5},o.object.extend(t,proto.IMNut)},7:function(e,t,a){"use strict";var n=a(37),o=a(65),r=a(29),s=a(3),i=a(2),u=a(4),l=a(5),c=a(6),d=a(27),p=a(11),g=a(26),h=a(8),M=new(function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).reset=function(){e.items=new Map,e.newItems=new Set},e.onUpdate=function(t){switch(console.log("chatstore onUpdate:",t),t["@type"]){case"queryConv":for(var a=t.convs,n=0;n<a.length;n++)e.updateConv(a[n]),e.newItems.add(a[n].getId());h.a.cacheLoaded&&e.clearChats(),e.emitUpdate(t);break;case"tgtMsgSend":case"msgAcked":var o=t.msg,s=o.getAckts()/1e6,i=e.items.get(o.getConversationid());e.assign(i,{last_msg:o,last_ts:s}),t=Object(r.a)({},t,{chatId:o.getConversationid()}),e.emitUpdate(t);break;case"groupInfo":var u=t.conv;e.updateGroup(u),e.emitUpdate(t)}},e.onClientUpdate=function(t){switch(t["@type"]){case"clientUpdateOpenChat":e.emitUpdate(t);break;case"clientLogout":e.reset()}},e.emitUpdate=function(t){e.emit(t["@type"],t)},e.reset(),e.addIMListener(),e.setMaxListeners(1/0),e}return Object(c.a)(t,e),Object(i.a)(t,[{key:"set",value:function(e){console.log("ChatStore set",e.id,e),this.items.set(e.id,e)}},{key:"get",value:function(e){return this.items.get(e)}},{key:"clearChats",value:function(){var e=!0,t=!1,a=void 0;try{for(var n,r=this.items.entries()[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var s=Object(o.a)(n.value,2),i=s[0];s[1];this.newItems.has(i)||(console.log("clearchat",i),g.a.removeChat(i))}}catch(u){t=!0,a=u}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}}},{key:"assign",value:function(e,t){if(e){var a=Object.assign({},e,t);this.set(a),g.a.saveChat(a.id,a)}}},{key:"updateConv",value:function(e){var t=this.items.get(e.getId());if(!t){console.log("ChatStore new conv: ",e);var a=0===e.getType()?e.getCidsList().find((function(e){return!(e===p.a.state.cid)})):e.getMembersList();return t={id:e.getId(),conv:e,type:e.getType(),extra:a,last_ts:0},this.set(t),void(h.a.cacheLoaded&&g.a.saveChat(e.getId(),t))}this.assign(t,{conv:e})}},{key:"updateGroup",value:function(e){var t=this.items.get(e.getId());t||t===e||(console.log("ChatStore new conv: ",e),this.assign(t,{conv:e}))}},{key:"addIMListener",value:function(){p.a.addListener("update",this.onUpdate),p.a.addListener("clientUpdate",this.onClientUpdate)}},{key:"getSortedItems",value:function(){return Array.from(new Map(Object(n.a)(this.items.entries()).sort((function(e,t){return t[1].last_ts-e[1].last_ts}))).keys())}},{key:"findUserChat",value:function(e){var t=Array.from(this.items.values()).find((function(t){return t.conv&&0===t.conv.getType()&&t.conv.getCidsList().includes(e)}));return console.log("openUser: ",t),t.id}}]),t}(d.EventEmitter));window.chat=M,t.a=M},70:function(e,t){e.exports="data:image/png;base64,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"},8:function(e,t,a){"use strict";var n=a(3),o=a(2),r=a(4),s=a(5),i=a(6),u=a(27),l=a(11),c=a(19),d=new(function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).reset=function(){e.cacheLoaded=!1,e.cid=null,e.chatId=null,e.dialogChatId=0,e.messageId=0,e.isChatDetailsVisible=!1,e.authorizationState=null},e.onUpdate=function(e){},e.onClientUpdate=function(t){switch(console.log("Appstore",t),t["@type"]){case"clientUpdateCacheLoaded":e.cacheLoaded=!0,e.emit("clientUpdateCacheLoaded");break;case"clientUpdateChatId":var a={"@type":"clientUpdateChatId",nextChatId:t.chatId,nextMessageId:t.messageId,previousChatId:e.chatId,previousMessageId:e.messageId};e.chatId=t.chatId,e.messageId=t.messageId,console.log("AppStore, clientUpdateChatId",a),e.emit("clientUpdateChatId",a);break;case"clientUpdateAuthState":t.auth_state===c.a.STATE_LOGIN&&(e.cid=t.uid),e.emit(t["@type"],t);break;case"clientLogout":e.reset(),e.emit(t["@type"],t);break;case"imState":e.emit(t["@type"],t)}},e.reset(),e.addIMListener(),e.setMaxListeners(1/0),e}return Object(i.a)(t,e),Object(o.a)(t,[{key:"changeChatDetailsVisibility",value:function(e){this.isChatDetailsVisible=e,this.emit("clientUpdateChatDetailsVisibility",e)}},{key:"getChatId",value:function(){return this.chatId}},{key:"getCid",value:function(){return this.cid}},{key:"getMessageId",value:function(){return this.messageId}},{key:"getConnectionState",value:function(){return this.connectionState}},{key:"addIMListener",value:function(){l.a.addListener("update",this.onUpdate),l.a.addListener("clientUpdate",this.onClientUpdate)}}]),t}(u.EventEmitter));window.app=d,t.a=d},92:function(e,t,a){var n=a(75),o=n,r=Function("return this")();o.exportSymbol("proto.IMNut.Conversation",null,r),o.exportSymbol("proto.IMNut.ConversationList",null,r),o.exportSymbol("proto.IMNut.ConversationType",null,r),o.exportSymbol("proto.IMNut.MemNick",null,r),proto.IMNut.MemNick=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.IMNut.MemNick,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.MemNick.displayName="proto.IMNut.MemNick"),proto.IMNut.Conversation=function(e){n.Message.initialize(this,e,0,-1,proto.IMNut.Conversation.repeatedFields_,null)},o.inherits(proto.IMNut.Conversation,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.Conversation.displayName="proto.IMNut.Conversation"),proto.IMNut.ConversationList=function(e){n.Message.initialize(this,e,0,-1,proto.IMNut.ConversationList.repeatedFields_,null)},o.inherits(proto.IMNut.ConversationList,n.Message),o.DEBUG&&!COMPILED&&(proto.IMNut.ConversationList.displayName="proto.IMNut.ConversationList"),n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.MemNick.prototype.toObject=function(e){return proto.IMNut.MemNick.toObject(e,this)},proto.IMNut.MemNick.toObject=function(e,t){var a={cid:n.Message.getFieldWithDefault(t,1,""),nick:n.Message.getFieldWithDefault(t,2,"")};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.MemNick.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.MemNick;return proto.IMNut.MemNick.deserializeBinaryFromReader(a,t)},proto.IMNut.MemNick.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setCid(a);break;case 2:a=t.readString();e.setNick(a);break;default:t.skipField()}}return e},proto.IMNut.MemNick.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.MemNick.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.MemNick.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getCid()).length>0&&t.writeString(1,a),(a=e.getNick()).length>0&&t.writeString(2,a)},proto.IMNut.MemNick.prototype.getCid=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.MemNick.prototype.setCid=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.MemNick.prototype.getNick=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.MemNick.prototype.setNick=function(e){n.Message.setProto3StringField(this,2,e)},proto.IMNut.Conversation.repeatedFields_=[4,7,8],n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.Conversation.prototype.toObject=function(e){return proto.IMNut.Conversation.toObject(e,this)},proto.IMNut.Conversation.toObject=function(e,t){var a={id:n.Message.getFieldWithDefault(t,1,""),name:n.Message.getFieldWithDefault(t,2,""),type:n.Message.getFieldWithDefault(t,3,0),cidsList:n.Message.getRepeatedField(t,4),creator:n.Message.getFieldWithDefault(t,5,""),version:n.Message.getFieldWithDefault(t,6,0),membersList:n.Message.getRepeatedField(t,7),nicksList:n.Message.toObjectList(t.getNicksList(),proto.IMNut.MemNick.toObject,e)};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.Conversation.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.Conversation;return proto.IMNut.Conversation.deserializeBinaryFromReader(a,t)},proto.IMNut.Conversation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readString();e.setId(a);break;case 2:a=t.readString();e.setName(a);break;case 3:a=t.readEnum();e.setType(a);break;case 4:a=t.readString();e.addCids(a);break;case 5:a=t.readString();e.setCreator(a);break;case 6:a=t.readInt32();e.setVersion(a);break;case 7:a=t.readString();e.addMembers(a);break;case 8:a=new proto.IMNut.MemNick;t.readMessage(a,proto.IMNut.MemNick.deserializeBinaryFromReader),e.addNicks(a);break;default:t.skipField()}}return e},proto.IMNut.Conversation.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.Conversation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.Conversation.serializeBinaryToWriter=function(e,t){var a=void 0;(a=e.getId()).length>0&&t.writeString(1,a),(a=e.getName()).length>0&&t.writeString(2,a),0!==(a=e.getType())&&t.writeEnum(3,a),(a=e.getCidsList()).length>0&&t.writeRepeatedString(4,a),(a=e.getCreator()).length>0&&t.writeString(5,a),0!==(a=e.getVersion())&&t.writeInt32(6,a),(a=e.getMembersList()).length>0&&t.writeRepeatedString(7,a),(a=e.getNicksList()).length>0&&t.writeRepeatedMessage(8,a,proto.IMNut.MemNick.serializeBinaryToWriter)},proto.IMNut.Conversation.prototype.getId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.IMNut.Conversation.prototype.setId=function(e){n.Message.setProto3StringField(this,1,e)},proto.IMNut.Conversation.prototype.getName=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.IMNut.Conversation.prototype.setName=function(e){n.Message.setProto3StringField(this,2,e)},proto.IMNut.Conversation.prototype.getType=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.IMNut.Conversation.prototype.setType=function(e){n.Message.setProto3EnumField(this,3,e)},proto.IMNut.Conversation.prototype.getCidsList=function(){return n.Message.getRepeatedField(this,4)},proto.IMNut.Conversation.prototype.setCidsList=function(e){n.Message.setField(this,4,e||[])},proto.IMNut.Conversation.prototype.addCids=function(e,t){n.Message.addToRepeatedField(this,4,e,t)},proto.IMNut.Conversation.prototype.clearCidsList=function(){this.setCidsList([])},proto.IMNut.Conversation.prototype.getCreator=function(){return n.Message.getFieldWithDefault(this,5,"")},proto.IMNut.Conversation.prototype.setCreator=function(e){n.Message.setProto3StringField(this,5,e)},proto.IMNut.Conversation.prototype.getVersion=function(){return n.Message.getFieldWithDefault(this,6,0)},proto.IMNut.Conversation.prototype.setVersion=function(e){n.Message.setProto3IntField(this,6,e)},proto.IMNut.Conversation.prototype.getMembersList=function(){return n.Message.getRepeatedField(this,7)},proto.IMNut.Conversation.prototype.setMembersList=function(e){n.Message.setField(this,7,e||[])},proto.IMNut.Conversation.prototype.addMembers=function(e,t){n.Message.addToRepeatedField(this,7,e,t)},proto.IMNut.Conversation.prototype.clearMembersList=function(){this.setMembersList([])},proto.IMNut.Conversation.prototype.getNicksList=function(){return n.Message.getRepeatedWrapperField(this,proto.IMNut.MemNick,8)},proto.IMNut.Conversation.prototype.setNicksList=function(e){n.Message.setRepeatedWrapperField(this,8,e)},proto.IMNut.Conversation.prototype.addNicks=function(e,t){return n.Message.addToRepeatedWrapperField(this,8,e,proto.IMNut.MemNick,t)},proto.IMNut.Conversation.prototype.clearNicksList=function(){this.setNicksList([])},proto.IMNut.ConversationList.repeatedFields_=[2],n.Message.GENERATE_TO_OBJECT&&(proto.IMNut.ConversationList.prototype.toObject=function(e){return proto.IMNut.ConversationList.toObject(e,this)},proto.IMNut.ConversationList.toObject=function(e,t){var a={limit:n.Message.getFieldWithDefault(t,1,0),convsList:n.Message.toObjectList(t.getConvsList(),proto.IMNut.Conversation.toObject,e)};return e&&(a.$jspbMessageInstance=t),a}),proto.IMNut.ConversationList.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.IMNut.ConversationList;return proto.IMNut.ConversationList.deserializeBinaryFromReader(a,t)},proto.IMNut.ConversationList.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readInt32();e.setLimit(a);break;case 2:a=new proto.IMNut.Conversation;t.readMessage(a,proto.IMNut.Conversation.deserializeBinaryFromReader),e.addConvs(a);break;default:t.skipField()}}return e},proto.IMNut.ConversationList.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.IMNut.ConversationList.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.IMNut.ConversationList.serializeBinaryToWriter=function(e,t){var a=void 0;0!==(a=e.getLimit())&&t.writeInt32(1,a),(a=e.getConvsList()).length>0&&t.writeRepeatedMessage(2,a,proto.IMNut.Conversation.serializeBinaryToWriter)},proto.IMNut.ConversationList.prototype.getLimit=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.IMNut.ConversationList.prototype.setLimit=function(e){n.Message.setProto3IntField(this,1,e)},proto.IMNut.ConversationList.prototype.getConvsList=function(){return n.Message.getRepeatedWrapperField(this,proto.IMNut.Conversation,2)},proto.IMNut.ConversationList.prototype.setConvsList=function(e){n.Message.setRepeatedWrapperField(this,2,e)},proto.IMNut.ConversationList.prototype.addConvs=function(e,t){return n.Message.addToRepeatedWrapperField(this,2,e,proto.IMNut.Conversation,t)},proto.IMNut.ConversationList.prototype.clearConvsList=function(){this.setConvsList([])},proto.IMNut.ConversationType={SINGLE:0,MULTIPLE:1,SYS:2},o.object.extend(t,proto.IMNut)}},[[145,1,2]]]);
//# sourceMappingURL=main.86898238.chunk.js.map